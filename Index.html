<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Historical Timeline Explorer</title>
    <style>
        /* General Reset and Body Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            height: 100vh;
            overflow: hidden;
            color: white;
        }

        .app-container {
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Top Header Section */
        .top-header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            z-index: 10;
            position: relative;
            display: flex; /* Added for header layout */
            flex-direction: column; /* Changed to column for better stacking of title and controls */
            align-items: center; /* Center items horizontally */
        }

        .header-top-row { /* New container for title and add data tab */
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: flex-start; /* Align items to the start vertically */
            margin-bottom: 20px; /* Space between this row and timeline controls */
        }

        .app-title {
            text-align: left; /* Changed to left */
            font-size: 28px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            flex-grow: 1; /* Allow title to take space */
            padding-left: 20px; /* Add some padding to the left */
        }

        .timeline-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            width: 100%; /* Ensure controls take full width */
            flex-wrap: wrap; /* Allow wrapping for responsiveness */
        }

        .current-year-display-container {
            display: flex;
            flex-direction: column;
            align-items: center; /* Center align text below */
            min-width: 150px;
        }

        .current-year {
            font-size: 32px;
            font-weight: bold;
            color: #FFD700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            text-align: center;
        }

        .selected-year-label {
            font-size: 12px; /* Smaller font for the label */
            color: rgba(255, 255, 255, 0.7);
            margin-top: 5px; /* Space between year and label */
            text-align: center;
        }

        .slider-wrapper {
            position: relative;
            width: 85%;
            margin: 0 20px;
            padding-bottom: 40px; /* Increased padding to make space for year-range */
            display: flex;
            align-items: center;
            flex-wrap: wrap; /* Allow wrapping for responsiveness */
            justify-content: center; /* Center items when wrapped */
        }

        .nav-arrow {
            width: 40px;
            height: 40px;
            background: rgba(255, 215, 0, 0.8);
            border: 2px solid white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 18px;
            font-weight: bold;
            color: #1e3c72;
            user-select: none;
            margin: 0 10px;
        }

        .nav-arrow:hover {
            background: #FFD700;
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.5);
        }

        .nav-arrow:active {
            transform: scale(0.95);
        }

        .nav-arrow.disabled {
            opacity: 0.3;
            cursor: not-allowed;
            pointer-events: none;
        }

        .slider-container {
            position: relative;
            flex: 1;
            min-width: 200px; /* Ensure slider doesn't get too small */
        }

        .year-slider {
            width: 100%;
            height: 12px;
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.3);
            outline: none;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            z-index: 2;
            -webkit-appearance: none;
            appearance: none;
        }

        .year-slider::-webkit-slider-track {
            height: 12px;
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.3);
        }

        .year-slider::-moz-range-track {
            height: 12px;
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.3);
            border: none;
        }

        .year-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px; /* Match the arrow base */
            height: 40px; /* Make it easy to grab */
            cursor: grab;
            background: transparent; /* Hide the actual thumb */
            position: relative;
            z-index: 3;
        }

        .year-slider::-moz-range-thumb {
            width: 24px;
            height: 40px;
            cursor: grab;
            background: transparent; /* Hide the actual thumb */
            border: 0;
        }

        .slider-container::before { /* This is our new visible thumb */
            content: '';
            position: absolute;
            left: var(--slider-progress, 50%);
            top: -14px;
            width: 0;
            height: 0;
            border-left: 12px solid transparent;
            border-right: 12px solid transparent;
            border-top: 20px solid #000000;
            transform: translateX(-50%);
            pointer-events: none; /* Let clicks pass through to the slider */
            z-index: 2;
            transition: left 0.1s linear;
        }

        .event-dots-container {
            position: absolute;
            top: 6px; /* Align with slider's vertical center */
            left: 0;
            right: 0;
            height: 0px;
            pointer-events: none;
            z-index: 1;
        }

        .timeline-dot {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #FFD700;
            border-radius: 50%;
            cursor: pointer;
            pointer-events: all;
            transform: translate(-50%, -50%); /* Center the dot on its left coordinate */
            transition: transform 0.2s ease;
        }

        .timeline-dot:hover {
            transform: translate(-50%, -50%) scale(1.8);
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
        }

        .separator-container {
            position: absolute;
            top: 35px;
            left: 0;
            right: 0;
            height: 30px;
            pointer-events: none;
            z-index: 0;
        }

        .timeline-separator {
            position: absolute;
            width: 2px;
            height: 15px;
            background: #5B9BD5;
            transform: translateX(-50%);
            pointer-events: all;
            cursor: pointer;
        }

        .timeline-separator-label {
            position: absolute;
            top: 18px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 11px;
            color: rgba(255, 255, 255, 0.7);
            white-space: nowrap;
            pointer-events: none;
        }

        .year-range {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
            /* Removed margin and width from here */
            position: absolute; /* Position absolutely within slider-wrapper */
            bottom: 0; /* Position at the bottom of slider-wrapper's padding */
            left: -20;
            right: 0;
            padding: 0 20px; /* Match slider's horizontal padding */
        }

        /* Content Area and Columns */
        .content-area {
            flex: 1;
            display: flex;
            padding: 20px;
            gap: 20px;
            overflow: hidden;
        }

        .column {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .column-header {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
            cursor: pointer; /* Make headers clickable */
            transition: background 0.3s ease;
        }

        .column-header:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .column-title {
            font-size: 24px;
            font-weight: bold;
            color: #FFD700;
            margin-bottom: 8px;
        }

        .column-subtitle {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 10px;
        }

        .column-count {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.6);
        }

        .column-body {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* Item Styles */
        .timeline-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
            animation: fadeInUp 0.4s ease-out;
            position: relative; /* Added for the dots menu */
        }

        .era-item {
            border-left: 4px solid #70AD47;
        }

        .era-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .era-item.non-muslim-rulers { border-left-color: #FFD966; }
        .era-item.muslim-caliphates { border-left-color: #70AD47; }

        .event-item {
            border-left: 4px solid #F79646;
        }

        .event-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .event-item.birth { border-left-color: #92D050; }
        .event-item.death { border-left-color: #C5504B; }
        .event-item.political { border-left-color: #FFD966; }
        .event-item.religious { border-left-color: #5B9BD5; }
        .event-item.conquest { border-left-color: #FFC000; }
        .event-item.military { border-left-color: #DC3545; } /* Added for military events */
        .event-item.construction { border-left-color: #17A2B8; } /* Added for construction events */

        /* NEW: War Item Styles */
        .war-item {
            border-left: 4px solid #DC3545; /* Red for wars */
        }

        .war-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }


        .person-item {
            border-left: 4px solid #A5A5A5;
        }

        .person-item:hover {
            transform: translateX(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .person-item.ahl-e-bait { border-left-color: #5B9BD5; }
        .person-item.rulers { border-left-color: #FFD966; }
        .person-item.scholars { border-left-color: #92D050; }
        .person-item.prophets { border-left-color: #00FF00; }
        .person-item.scientists { border-left-color: #FF6B6B; }

        .item-title {
            font-size: 16px;
            font-weight: bold;
            color: #FFD700;
            margin-bottom: 5px;
        }

        .item-subtitle {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 8px;
        }

        .item-description {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.4;
	    text-align: justify; /* Add this line */
        }

        .no-data {
            text-align: center;
            color: rgba(255, 255, 255, 0.5);
            font-style: italic;
            padding: 40px 20px;
        }

        /* Add Data Tab Styles */
        .add-data-tab {
            /* position: fixed; Removed fixed position to allow it to flow with header-top-row */
            /* top: 24px; */
            /* right: 32px; */
            z-index: 30;
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap; /* Allow items to wrap on smaller screens */
            justify-content: flex-end; /* Align to the right */
        }

        .search-container, .go-to-year-container { /* Combined styles */
            position: relative;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .search-input, .go-to-year-input { /* Combined styles */
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 8px;
            padding: 9px 15px;
            color: white;
            font-weight: 500;
            width: 150px;
            transition: all 0.3s ease;
            flex-grow: 1;
        }

        .go-to-year-input {
            width: 100px; /* Adjust width for year input */
        }

        .search-input::placeholder, .go-to-year-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .search-input:focus, .go-to-year-input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.3);
            border-color: #FFD700;
            width: 180px;
        }

        .go-to-year-input:focus {
            width: 120px; /* Adjust width for year input on focus */
        }

        .add-data-button {
            background: #FFD700;
            color: #223;
            font-weight: bold;
            padding: 9px 20px;
            border: none;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.10);
            cursor: pointer;
        }

        .add-data-modal {
            display: none;
            position: fixed;
            top: 60px;
            right: 32px;
            z-index: 1000;
            background: rgba(30,60,114,0.99);
            border-radius: 12px;
            box-shadow: 0 8px 40px rgba(0,0,20,0.12);
            width: 340px;
            /*max-width: 96vw;*/
	    max-width: none; /* Remove width limits */
            max-height: none; /* Remove height limits */
            padding: 30px 22px;
        }

        /* Specific styles for Search Results Modal */
        #searchResultsModal {
            width: 500px; /* Wider for results */
		/*max-width: 90vw;*/
		max-width: none; /* Remove width limits */
		max-height: none; /* Remove height limits */
            left: 50%; /* Center horizontally */
            transform: translateX(-50%); /* Adjust for centering */
            top: 100px; /* Position lower than add data modal */
        }

        #searchResultsModal .modal-header {
            margin-bottom: 15px;
        }

        #searchResultsContent {
            max-height: 400px; /* Limit height and enable scrolling */
            overflow-y: auto;
            padding-top: 10px;
        }

        .search-result-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .search-result-item:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .search-result-item .item-title {
            color: #FFD700;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .search-result-item .item-subtitle {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 5px;
        }

        .search-result-item .item-description {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.9);
        }

        .search-result-category {
            font-size: 18px;
            font-weight: bold;
            color: #5B9BD5; /* A nice blue for categories */
            margin-top: 20px;
            margin-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding-bottom: 5px;
        }

        /* Highlight for search terms */
        .highlight {
            background-color: rgba(255, 255, 0, 0.5); /* Yellow highlight with transparency */
            padding: 2px 0;
            border-radius: 3px;
        }


        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-weight: bold;
            font-size: 18px;
            color: #FFD700;
        }

        .close-button {
            background: transparent;
            color: white;
            font-size: 20px;
            border: none;
            cursor: pointer;
            font-weight: bold;
        }

        .form-group {
            margin-top: 14px;
        }

        .form-label {
            font-size: 13px;
            color: #FFD700;
            font-weight: 500;
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            margin-top: 4px;
            padding: 7px 9px;
            font-size: 15px;
            border-radius: 5px;
            border: 1px solid #FFD700;
        }

        .form-textarea {
            resize: both;
        }

        .submit-button {
            margin-top: 18px;
            width: 100%;
            font-weight: bold;
            font-size: 16px;
            background: #FFD700;
            color: #1e3c72;
            border: none;
            padding: 9px 0;
            border-radius: 6px;
            cursor: pointer;
        }

        /* Styles for BC/CE selection */
        .year-input-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .year-input-group .form-input {
            flex-grow: 1;
        }

        .year-input-group .form-select {
            width: auto;
            padding: 7px 5px;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Scrollbar Styles */
        .column-body::-webkit-scrollbar {
            width: 8px;
        }

        .column-body::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        .column-body::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
        }

        .column-body::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }

        /* Dots menu styles */
        .item-actions {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 1;
        }

        .dots-button {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            font-size: 20px;
            cursor: pointer;
            padding: 0 5px;
            line-height: 1;
        }

        .dots-button:hover {
            color: #FFD700;
        }

        .dropdown-menu {
            display: none;
            position: absolute;
            top: 25px;
            right: 0;
            background: rgba(30, 60, 114, 0.95);
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            min-width: 120px;
            z-index: 10;
            overflow: hidden;
        }

        .dropdown-menu.active {
            display: block;
        }

        .dropdown-menu button {
            display: block;
            width: 100%;
            padding: 10px 15px;
            background: none;
            border: none;
            color: white;
            text-align: left;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s ease;
        }

        .dropdown-menu button:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* New styles for the full list modal */
        .full-list-modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.7);
            backdrop-filter: blur(5px);
            padding-top: 60px;
        }

        .full-list-modal-content {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            margin: 5% auto;
            padding: 30px;
            border: 1px solid #888;
            width: 80%;
            max-width: 900px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            position: relative;
            max-height: 80vh;
            overflow-y: auto;
        }

        .full-list-modal-content .close-button {
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 30px;
            color: white;
        }

        .full-list-modal-content .modal-title {
            font-size: 28px;
            margin-bottom: 20px;
            text-align: center;
        }

        .full-list-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            transition: background 0.2s ease;
        }

        .full-list-item:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .full-list-item .item-title {
            color: #FFD700;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .full-list-item .item-subtitle {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 8px;
        }

        .full-list-item .item-description {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.4;
        }

        /* Chat Modal */
        #chatModal {
             display: none;
    position: fixed;
    z-index: 1000;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    background: rgba(30, 60, 114, 0.99);
    border-radius: 12px;
    box-shadow: 0 8px 40px rgba(0, 0, 20, 0.12);
    min-width: 400px; /* Minimum width */
    min-height: 300px; /* Minimum height */
    width: 80vw; /* Default width - 80% of viewport */
    max-width: none; /* Remove width limits */
    max-height: none; /* Remove height limits */
    padding: 30px 22px;
    overflow: visible; /* Allow content to overflow if needed */
    resize: both; /* Make the entire modal resizable */
        }

        #chatModal .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px; /* Add some space below header */
        }

        #chatModal .modal-title {
            font-weight: bold;
            font-size: 24px; /* Larger title */
            color: #FFD700;
        }

        #chatModal .close-button {
            background: transparent;
            color: white;
            font-size: 30px; /* Larger close button */
            border: none;
            cursor: pointer;
            font-weight: bold;
        }

        #chatModal .form-textarea {
            width: 100%;
            margin-top: 10px;
            padding: 12px 15px; /* More padding */
            font-size: 16px; /* Larger font */
            border-radius: 8px;
            border: 1px solid #FFD700;
            background: rgba(255, 255, 255, 0.1); /* Slightly visible background */
            color: white;
            resize: both;
	    max-width:1489;
            min-height: 100px; /* Minimum height for input */
        }

        #chatModal .form-textarea::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        #chatModal .submit-button {
            margin-top: 15px;
            width: 10%;
            font-weight: bold;
            font-size: 18px; /* Larger button text */
            background: #FFD700;
            color: #1e3c72;
            border: none;
            padding: 12px 0; /* More padding */
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s ease, transform 0.2s ease;
	    Position: relative;
	    top:auto;
	    left: 1340;
        }

        #chatModal .submit-button:hover {
            background: #e6c200;
            transform: translateY(-2px);
        }

        #chatModal #chatResponse { 
 	background: rgba(255, 255, 255, 0.05);
   	padding: 15px;
    	border-radius: 8px;
    	margin-top: 15px;
    	font-size: 15px;
    	line-height: 1.6;
    	min-height: 150px; /* Starting minimum height */
    	min-width: 300px; /* Starting minimum width */
    	height: 250px; /* Default height */
    	width: 100%; /* Default width */
    	overflow: auto; /* Enable scrolling when content overflows */
    	border: 1px solid rgba(255, 255, 255, 0.2);
    	resize: both; /* This makes it resizable both ways */
    	position: relative;
        }

        #chatModal #chatSources {
            margin-top: 10px;
            font-size: 13px;
            color: rgba(255, 255, 255, 0.8);
            padding-left: 5px;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="top-header">
            <div class="header-top-row">
                <div class="app-title">
                    Timeline By Asad Ikram <br></div>
                <div class="add-data-tab">
                    <!-- New "Go to Year" search bar -->
                    <div class="go-to-year-container">
                        <input type="number" id="goToYearInput" class="go-to-year-input" placeholder="Go to year">
                        <select id="goToYearEra" class="form-select" style="width: auto; padding: 9px 5px;">
                            <option value="CE">CE</option>
                            <option value="BCE">BCE</option>
                        </select>
                        <button id="goToYearButton" class="add-data-button">Go</button>
                    

</div>

                    <div class="search-container">
                        <input type="text" id="yearSearchInput" class="search-input" placeholder="Search by name...">
                        <button id="searchButton" class="add-data-button">Search</button>
                    </div>
                    <button id="saveHtmlButton" class="add-data-button">Save HTML</button>
                    <button id="openAddDataModal" class="add-data-button">Add Data</button>
                </div>
            </div>

            <div class="timeline-controls">
                <div class="current-year-display-container">
                    <div class="current-year" id="yearDisplay">470 BCE</div>
                    <div class="selected-year-label">Selected Year</div>
                </div>
                <div class="slider-wrapper">
                    <div class="nav-arrow" id="prevArrow">◀</div>
                    <div class="slider-container" style="--slider-progress: 17.520661157024794%;">
                        <input type="range" class="year-slider" id="yearSlider" min="-1000" max="2025" value="800" step="1">
                        <div class="event-dots-container" id="eventDotsContainer"><div class="timeline-dot" data-year="-1000" style="left: 0%;"></div><div class="timeline-dot" data-year="-969" style="left: 1.02479%;"></div><div class="timeline-dot" data-year="-960" style="left: 1.32231%;"></div><div class="timeline-dot" data-year="-950" style="left: 1.65289%;"></div><div class="timeline-dot" data-year="-911" style="left: 2.94215%;"></div><div class="timeline-dot" data-year="-891" style="left: 3.60331%;"></div><div class="timeline-dot" data-year="-771" style="left: 7.57025%;"></div><div class="timeline-dot" data-year="-753" style="left: 8.16529%;"></div><div class="timeline-dot" data-year="-717" style="left: 9.35537%;"></div><div class="timeline-dot" data-year="-685" style="left: 10.4132%;"></div><div class="timeline-dot" data-year="-678" style="left: 10.6446%;"></div><div class="timeline-dot" data-year="-658" style="left: 11.3058%;"></div><div class="timeline-dot" data-year="-650" style="left: 11.5702%;"></div><div class="timeline-dot" data-year="-649" style="left: 11.6033%;"></div><div class="timeline-dot" data-year="-630" style="left: 12.2314%;"></div><div class="timeline-dot" data-year="-627" style="left: 12.3306%;"></div><div class="timeline-dot" data-year="-626" style="left: 12.3636%;"></div><div class="timeline-dot" data-year="-609" style="left: 12.9256%;"></div><div class="timeline-dot" data-year="-605" style="left: 13.0579%;"></div><div class="timeline-dot" data-year="-600" style="left: 13.2231%;"></div><div class="timeline-dot" data-year="-595" style="left: 13.3884%;"></div><div class="timeline-dot" data-year="-586" style="left: 13.686%;"></div><div class="timeline-dot" data-year="-563" style="left: 14.4463%;"></div><div class="timeline-dot" data-year="-562" style="left: 14.4793%;"></div><div class="timeline-dot" data-year="-551" style="left: 14.843%;"></div><div class="timeline-dot" data-year="-550" style="left: 14.876%;"></div><div class="timeline-dot" data-year="-539" style="left: 15.2397%;"></div><div class="timeline-dot" data-year="-530" style="left: 15.5372%;"></div><div class="timeline-dot" data-year="-516" style="left: 16%;"></div><div class="timeline-dot" data-year="-509" style="left: 16.2314%;"></div><div class="timeline-dot" data-year="-486" style="left: 16.9917%;"></div><div class="timeline-dot" data-year="-483" style="left: 17.0909%;"></div><div class="timeline-dot" data-year="-479" style="left: 17.2231%;"></div><div class="timeline-dot" data-year="-470" style="left: 17.5207%;"></div><div class="timeline-dot" data-year="-399" style="left: 19.8678%;"></div><div class="timeline-dot" data-year="-356" style="left: 21.2893%;"></div><div class="timeline-dot" data-year="-332" style="left: 22.0826%;"></div><div class="timeline-dot" data-year="-330" style="left: 22.1488%;"></div><div class="timeline-dot" data-year="-323" style="left: 22.3802%;"></div><div class="timeline-dot" data-year="-322" style="left: 22.4132%;"></div><div class="timeline-dot" data-year="-304" style="left: 23.0083%;"></div><div class="timeline-dot" data-year="-232" style="left: 25.3884%;"></div><div class="timeline-dot" data-year="-220" style="left: 25.7851%;"></div><div class="timeline-dot" data-year="-206" style="left: 26.2479%;"></div><div class="timeline-dot" data-year="-185" style="left: 26.9421%;"></div><div class="timeline-dot" data-year="-167" style="left: 27.5372%;"></div><div class="timeline-dot" data-year="-160" style="left: 27.7686%;"></div><div class="timeline-dot" data-year="-49" style="left: 31.438%;"></div><div class="timeline-dot" data-year="-44" style="left: 31.6033%;"></div><div class="timeline-dot" data-year="-27" style="left: 32.1653%;"></div><div class="timeline-dot" data-year="30" style="left: 34.0496%;"></div><div class="timeline-dot" data-year="50" style="left: 34.7107%;"></div><div class="timeline-dot" data-year="63" style="left: 35.1405%;"></div><div class="timeline-dot" data-year="70" style="left: 35.3719%;"></div><div class="timeline-dot" data-year="135" style="left: 37.5207%;"></div><div class="timeline-dot" data-year="224" style="left: 40.4628%;"></div><div class="timeline-dot" data-year="320" style="left: 43.6364%;"></div><div class="timeline-dot" data-year="330" style="left: 43.9669%;"></div><div class="timeline-dot" data-year="418" style="left: 46.876%;"></div><div class="timeline-dot" data-year="476" style="left: 48.7934%;"></div><div class="timeline-dot" data-year="550" style="left: 51.2397%;"></div><div class="timeline-dot" data-year="570" style="left: 51.9008%;"></div><div class="timeline-dot" data-year="573" style="left: 52%;"></div><div class="timeline-dot" data-year="576" style="left: 52.0992%;"></div><div class="timeline-dot" data-year="584" style="left: 52.3636%;"></div><div class="timeline-dot" data-year="600" style="left: 52.8926%;"></div><div class="timeline-dot" data-year="601" style="left: 52.9256%;"></div><div class="timeline-dot" data-year="605" style="left: 53.0579%;"></div><div class="timeline-dot" data-year="610" style="left: 53.2231%;"></div><div class="timeline-dot" data-year="615" style="left: 53.3884%;"></div><div class="timeline-dot" data-year="618" style="left: 53.4876%;"></div><div class="timeline-dot" data-year="620" style="left: 53.5537%;"></div><div class="timeline-dot" data-year="622" style="left: 53.6198%;"></div><div class="timeline-dot" data-year="624" style="left: 53.686%;"></div><div class="timeline-dot" data-year="625" style="left: 53.719%;"></div><div class="timeline-dot" data-year="626" style="left: 53.7521%;"></div><div class="timeline-dot" data-year="630" style="left: 53.8843%;"></div><div class="timeline-dot" data-year="632" style="left: 53.9504%;"></div><div class="timeline-dot" data-year="633" style="left: 53.9835%;"></div><div class="timeline-dot" data-year="634" style="left: 54.0165%;"></div><div class="timeline-dot" data-year="636" style="left: 54.0826%;"></div><div class="timeline-dot" data-year="638" style="left: 54.1488%;"></div><div class="timeline-dot" data-year="642" style="left: 54.281%;"></div><div class="timeline-dot" data-year="644" style="left: 54.3471%;"></div><div class="timeline-dot" data-year="651" style="left: 54.5785%;"></div><div class="timeline-dot" data-year="656" style="left: 54.7438%;"></div><div class="timeline-dot" data-year="661" style="left: 54.9091%;"></div><div class="timeline-dot" data-year="670" style="left: 55.2066%;"></div><div class="timeline-dot" data-year="680" style="left: 55.5372%;"></div><div class="timeline-dot" data-year="685" style="left: 55.7025%;"></div><div class="timeline-dot" data-year="699" style="left: 56.1653%;"></div><div class="timeline-dot" data-year="711" style="left: 56.562%;"></div><div class="timeline-dot" data-year="720" style="left: 56.8595%;"></div><div class="timeline-dot" data-year="721" style="left: 56.8926%;"></div><div class="timeline-dot" data-year="731" style="left: 57.2231%;"></div><div class="timeline-dot" data-year="732" style="left: 57.2562%;"></div><div class="timeline-dot" data-year="750" style="left: 57.8512%;"></div><div class="timeline-dot" data-year="754" style="left: 57.9835%;"></div><div class="timeline-dot" data-year="756" style="left: 58.0496%;"></div><div class="timeline-dot" data-year="762" style="left: 58.2479%;"></div><div class="timeline-dot" data-year="767" style="left: 58.4132%;"></div><div class="timeline-dot" data-year="770" style="left: 58.5124%;"></div><div class="timeline-dot" data-year="780" style="left: 58.843%;"></div><div class="timeline-dot" data-year="786" style="left: 59.0413%;"></div><div class="timeline-dot" data-year="788" style="left: 59.1074%;"></div><div class="timeline-dot" data-year="793" style="left: 59.2727%;"></div><div class="timeline-dot" data-year="795" style="left: 59.3388%;"></div><div class="timeline-dot" data-year="810" style="left: 59.8347%;"></div><div class="timeline-dot" data-year="815" style="left: 60%;"></div><div class="timeline-dot" data-year="820" style="left: 60.1653%;"></div><div class="timeline-dot" data-year="833" style="left: 60.595%;"></div><div class="timeline-dot" data-year="850" style="left: 61.157%;"></div><div class="timeline-dot" data-year="855" style="left: 61.3223%;"></div><div class="timeline-dot" data-year="870" style="left: 61.8182%;"></div><div class="timeline-dot" data-year="873" style="left: 61.9174%;"></div><div class="timeline-dot" data-year="874" style="left: 61.9504%;"></div><div class="timeline-dot" data-year="891" style="left: 62.5124%;"></div><div class="timeline-dot" data-year="907" style="left: 63.0413%;"></div><div class="timeline-dot" data-year="909" style="left: 63.1074%;"></div><div class="timeline-dot" data-year="934" style="left: 63.9339%;"></div><div class="timeline-dot" data-year="936" style="left: 64%;"></div><div class="timeline-dot" data-year="960" style="left: 64.7934%;"></div><div class="timeline-dot" data-year="961" style="left: 64.8264%;"></div><div class="timeline-dot" data-year="962" style="left: 64.8595%;"></div><div class="timeline-dot" data-year="965" style="left: 64.9587%;"></div><div class="timeline-dot" data-year="971" style="left: 65.157%;"></div><div class="timeline-dot" data-year="980" style="left: 65.4545%;"></div><div class="timeline-dot" data-year="985" style="left: 65.6198%;"></div><div class="timeline-dot" data-year="1021" style="left: 66.8099%;"></div><div class="timeline-dot" data-year="1030" style="left: 67.1074%;"></div><div class="timeline-dot" data-year="1031" style="left: 67.1405%;"></div><div class="timeline-dot" data-year="1037" style="left: 67.3388%;"></div><div class="timeline-dot" data-year="1040" style="left: 67.438%;"></div><div class="timeline-dot" data-year="1048" style="left: 67.7025%;"></div><div class="timeline-dot" data-year="1058" style="left: 68.0331%;"></div><div class="timeline-dot" data-year="1066" style="left: 68.2975%;"></div><div class="timeline-dot" data-year="1085" style="left: 68.9256%;"></div><div class="timeline-dot" data-year="1095" style="left: 69.2562%;"></div><div class="timeline-dot" data-year="1099" style="left: 69.3884%;"></div><div class="timeline-dot" data-year="1111" style="left: 69.7851%;"></div><div class="timeline-dot" data-year="1118" style="left: 70.0165%;"></div><div class="timeline-dot" data-year="1131" style="left: 70.4463%;"></div><div class="timeline-dot" data-year="1137" style="left: 70.6446%;"></div><div class="timeline-dot" data-year="1143" style="left: 70.843%;"></div><div class="timeline-dot" data-year="1146" style="left: 70.9421%;"></div><div class="timeline-dot" data-year="1162" style="left: 71.4711%;"></div><div class="timeline-dot" data-year="1165" style="left: 71.5702%;"></div><div class="timeline-dot" data-year="1171" style="left: 71.7686%;"></div><div class="timeline-dot" data-year="1173" style="left: 71.8347%;"></div><div class="timeline-dot" data-year="1174" style="left: 71.8678%;"></div><div class="timeline-dot" data-year="1187" style="left: 72.2975%;"></div><div class="timeline-dot" data-year="1193" style="left: 72.4959%;"></div><div class="timeline-dot" data-year="1206" style="left: 72.9256%;"></div><div class="timeline-dot" data-year="1217" style="left: 73.2893%;"></div><div class="timeline-dot" data-year="1223" style="left: 73.4876%;"></div><div class="timeline-dot" data-year="1227" style="left: 73.6198%;"></div><div class="timeline-dot" data-year="1236" style="left: 73.9174%;"></div><div class="timeline-dot" data-year="1238" style="left: 73.9835%;"></div><div class="timeline-dot" data-year="1240" style="left: 74.0496%;"></div><div class="timeline-dot" data-year="1258" style="left: 74.6446%;"></div><div class="timeline-dot" data-year="1260" style="left: 74.7107%;"></div><div class="timeline-dot" data-year="1263" style="left: 74.8099%;"></div><div class="timeline-dot" data-year="1265" style="left: 74.876%;"></div><div class="timeline-dot" data-year="1266" style="left: 74.9091%;"></div><div class="timeline-dot" data-year="1277" style="left: 75.2727%;"></div><div class="timeline-dot" data-year="1291" style="left: 75.7355%;"></div><div class="timeline-dot" data-year="1299" style="left: 76%;"></div><div class="timeline-dot" data-year="1304" style="left: 76.1653%;"></div><div class="timeline-dot" data-year="1325" style="left: 76.8595%;"></div><div class="timeline-dot" data-year="1328" style="left: 76.9587%;"></div><div class="timeline-dot" data-year="1332" style="left: 77.0909%;"></div><div class="timeline-dot" data-year="1337" style="left: 77.2562%;"></div><div class="timeline-dot" data-year="1368" style="left: 78.281%;"></div><div class="timeline-dot" data-year="1406" style="left: 79.5372%;"></div><div class="timeline-dot" data-year="1453" style="left: 81.0909%;"></div><div class="timeline-dot" data-year="1483" style="left: 82.0826%;"></div><div class="timeline-dot" data-year="1492" style="left: 82.3802%;"></div><div class="timeline-dot" data-year="1494" style="left: 82.4463%;"></div><div class="timeline-dot" data-year="1500" style="left: 82.6446%;"></div><div class="timeline-dot" data-year="1508" style="left: 82.9091%;"></div><div class="timeline-dot" data-year="1516" style="left: 83.1736%;"></div><div class="timeline-dot" data-year="1517" style="left: 83.2066%;"></div><div class="timeline-dot" data-year="1530" style="left: 83.6364%;"></div><div class="timeline-dot" data-year="1542" style="left: 84.0331%;"></div><div class="timeline-dot" data-year="1556" style="left: 84.4959%;"></div><div class="timeline-dot" data-year="1562" style="left: 84.6942%;"></div><div class="timeline-dot" data-year="1564" style="left: 84.7603%;"></div><div class="timeline-dot" data-year="1566" style="left: 84.8264%;"></div><div class="timeline-dot" data-year="1571" style="left: 84.9917%;"></div><div class="timeline-dot" data-year="1605" style="left: 86.1157%;"></div><div class="timeline-dot" data-year="1618" style="left: 86.5455%;"></div><div class="timeline-dot" data-year="1630" style="left: 86.9421%;"></div><div class="timeline-dot" data-year="1642" style="left: 87.3388%;"></div><div class="timeline-dot" data-year="1644" style="left: 87.405%;"></div><div class="timeline-dot" data-year="1700" style="left: 89.2562%;"></div><div class="timeline-dot" data-year="1707" style="left: 89.4876%;"></div><div class="timeline-dot" data-year="1721" style="left: 89.9504%;"></div><div class="timeline-dot" data-year="1727" style="left: 90.1488%;"></div><div class="timeline-dot" data-year="1744" style="left: 90.7107%;"></div><div class="timeline-dot" data-year="1769" style="left: 91.5372%;"></div><div class="timeline-dot" data-year="1773" style="left: 91.6694%;"></div><div class="timeline-dot" data-year="1774" style="left: 91.7025%;"></div><div class="timeline-dot" data-year="1775" style="left: 91.7355%;"></div><div class="timeline-dot" data-year="1777" style="left: 91.8017%;"></div><div class="timeline-dot" data-year="1783" style="left: 92%;"></div><div class="timeline-dot" data-year="1788" style="left: 92.1653%;"></div><div class="timeline-dot" data-year="1791" style="left: 92.2645%;"></div><div class="timeline-dot" data-year="1792" style="left: 92.2975%;"></div><div class="timeline-dot" data-year="1802" style="left: 92.6281%;"></div><div class="timeline-dot" data-year="1803" style="left: 92.6612%;"></div><div class="timeline-dot" data-year="1806" style="left: 92.7603%;"></div><div class="timeline-dot" data-year="1809" style="left: 92.8595%;"></div><div class="timeline-dot" data-year="1812" style="left: 92.9587%;"></div><div class="timeline-dot" data-year="1815" style="left: 93.0579%;"></div><div class="timeline-dot" data-year="1821" style="left: 93.2562%;"></div><div class="timeline-dot" data-year="1836" style="left: 93.7521%;"></div><div class="timeline-dot" data-year="1855" style="left: 94.3802%;"></div><div class="timeline-dot" data-year="1857" style="left: 94.4463%;"></div><div class="timeline-dot" data-year="1861" style="left: 94.5785%;"></div><div class="timeline-dot" data-year="1865" style="left: 94.7107%;"></div><div class="timeline-dot" data-year="1867" style="left: 94.7769%;"></div><div class="timeline-dot" data-year="1868" style="left: 94.8099%;"></div><div class="timeline-dot" data-year="1870" style="left: 94.876%;"></div><div class="timeline-dot" data-year="1871" style="left: 94.9091%;"></div><div class="timeline-dot" data-year="1878" style="left: 95.1405%;"></div><div class="timeline-dot" data-year="1879" style="left: 95.1736%;"></div><div class="timeline-dot" data-year="1882" style="left: 95.2727%;"></div><div class="timeline-dot" data-year="1885" style="left: 95.3719%;"></div><div class="timeline-dot" data-year="1886" style="left: 95.405%;"></div><div class="timeline-dot" data-year="1887" style="left: 95.438%;"></div><div class="timeline-dot" data-year="1888" style="left: 95.4711%;"></div><div class="timeline-dot" data-year="1898" style="left: 95.8017%;"></div><div class="timeline-dot" data-year="1912" style="left: 96.2645%;"></div><div class="timeline-dot" data-year="1914" style="left: 96.3306%;"></div><div class="timeline-dot" data-year="1917" style="left: 96.4298%;"></div><div class="timeline-dot" data-year="1918" style="left: 96.4628%;"></div><div class="timeline-dot" data-year="1922" style="left: 96.595%;"></div><div class="timeline-dot" data-year="1934" style="left: 96.9917%;"></div><div class="timeline-dot" data-year="1936" style="left: 97.0579%;"></div><div class="timeline-dot" data-year="1937" style="left: 97.0909%;"></div><div class="timeline-dot" data-year="1939" style="left: 97.157%;"></div><div class="timeline-dot" data-year="1942" style="left: 97.2562%;"></div><div class="timeline-dot" data-year="1944" style="left: 97.3223%;"></div><div class="timeline-dot" data-year="1945" style="left: 97.3554%;"></div><div class="timeline-dot" data-year="1948" style="left: 97.4545%;"></div><div class="timeline-dot" data-year="1954" style="left: 97.6529%;"></div><div class="timeline-dot" data-year="1955" style="left: 97.686%;"></div><div class="timeline-dot" data-year="1958" style="left: 97.7851%;"></div><div class="timeline-dot" data-year="1961" style="left: 97.8843%;"></div><div class="timeline-dot" data-year="1962" style="left: 97.9174%;"></div><div class="timeline-dot" data-year="1965" style="left: 98.0165%;"></div><div class="timeline-dot" data-year="1973" style="left: 98.281%;"></div><div class="timeline-dot" data-year="1997" style="left: 99.0744%;"></div><div class="timeline-dot" data-year="2018" style="left: 99.7686%;"></div></div>
                        <div class="separator-container" id="separatorContainer"><div class="timeline-separator" style="left: 3.30579%;"><div class="timeline-separator-label">900 BCE</div></div><div class="timeline-separator" style="left: 13.2231%;"><div class="timeline-separator-label">600 BCE</div></div><div class="timeline-separator" style="left: 23.1405%;"><div class="timeline-separator-label">300 BCE</div></div><div class="timeline-separator" style="left: 33.0579%;"><div class="timeline-separator-label">1 BCE</div></div><div class="timeline-separator" style="left: 42.9752%;"><div class="timeline-separator-label">300 CE</div></div><div class="timeline-separator" style="left: 52.8926%;"><div class="timeline-separator-label">600 CE</div></div><div class="timeline-separator" style="left: 62.8099%;"><div class="timeline-separator-label">900 CE</div></div><div class="timeline-separator" style="left: 72.7273%;"><div class="timeline-separator-label">1200 CE</div></div><div class="timeline-separator" style="left: 82.6446%;"><div class="timeline-separator-label">1500 CE</div></div><div class="timeline-separator" style="left: 92.562%;"><div class="timeline-separator-label">1800 CE</div></div></div>
                    </div>
                    <div class="nav-arrow" id="nextArrow">▶</div>
                    <!-- Moved year-range inside slider-wrapper -->
                    <div class="year-range">
                        <span>1000 BCE        </span>
                        <span>2025 CE</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="content-area">
            <div class="column">
                <div class="column-header" id="erasHeader">
                    <div class="column-title">Eras</div>
                    <div class="column-subtitle" id="erasSubtitle">Active in 470 BCE</div>
                    <div class="column-count" id="erasCount">2 active eras</div>
                </div>
                <div class="column-body" id="erasContent">
                <div class="timeline-item era-item non-muslim-rulers">
                    
                <div class="item-actions">
                    <button class="dots-button" onclick="toggleDropdown(this, event)">⋮</button>
                    <div class="dropdown-menu">
                        <button onclick="editItem(1)">Edit</button>
                        <button onclick="deleteItem(1)">Delete</button>
                    </div>
                </div>
            
                    <div class="item-title">Roman Republic</div>
                    <div class="item-subtitle">509 BCE - 27 BCE</div>
                    <div class="item-description">Republican form of government in Rome, characterized by consuls, senate, and citizen assemblies.</div>
                </div>
            
                <div class="timeline-item era-item custom-era">
                    
                <div class="item-actions">
                    <button class="dots-button" onclick="toggleDropdown(this, event)">⋮</button>
                    <div class="dropdown-menu">
                        <button onclick="editItem(67)">Edit</button>
                        <button onclick="deleteItem(67)">Delete</button>
                    </div>
                </div>
            
                    <div class="item-title">Achaemenid Empire (First Persian Empire)</div>
                    <div class="item-subtitle">550 BCE - 330 BCE</div>
                    <div class="item-description">Cyrus the Great unifies various Iranian tribes and conquers the Median Empire, Lydia, and the Neo-Babylonian Empire, establishing the vast Achaemenid Empire.</div>
                </div>
            </div>
            </div>

            <div class="column">
                <div class="column-header" id="eventsHeader">
                    <div class="column-title">Major Events</div>
                    <div class="column-subtitle" id="eventsSubtitle">Events in 470 BCE</div>
                    <div class="column-count" id="eventsCount">0 events</div>
                </div>
                <div class="column-body" id="eventsContent"><div class="no-data">No recorded events for this year</div></div>
            </div>

            <!-- NEW: Wars Column -->
            <div class="column">
                <div class="column-header" id="warsHeader">
                    <div class="column-title">Wars</div>
                    <div class="column-subtitle" id="warsSubtitle">Active or starting in 470 BCE</div>
                    <div class="column-count" id="warsCount">0 wars</div>
                </div>
                <div class="column-body" id="warsContent"><div class="no-data">No recorded wars for this period</div></div>
            </div>

            <div class="column">
                <div class="column-header" id="personalitiesHeader">
                    <div class="column-title">Personalities</div>
                    <div class="column-subtitle" id="personalitiesSubtitle">Alive in 470 BCE</div>
                    <div class="column-count" id="personalitiesCount">1 individual</div>
                </div>
                <div class="column-body" id="personalitiesContent">
                <div class="timeline-item person-item custom-personality">
                    
                <div class="item-actions">
                    <button class="dots-button" onclick="toggleDropdown(this, event)">⋮</button>
                    <div class="dropdown-menu">
                        <button onclick="editItem(181)">Edit</button>
                        <button onclick="deleteItem(181)">Delete</button>
                    </div>
                </div>
            
                    <div class="item-title">Socrates</div>
                    <div class="item-subtitle">470 BCE - 399 BCE</div>
                    <div class="item-description">Father of Western philosophy; developed the "Socratic Method" of questioning to stimulate critical thinking and expose contradictions.


Accused of "corrupting the youth" and mocking traditional gods, leading to his trial and execution.</div>
                </div>
            </div>
            </div>
        </div>
    </div>

    <!-- Add Data Modal -->
    <div id="addDataModal" class="add-data-modal" style="display: none;">
        <div class="modal-header">
            <div class="modal-title" id="addDataModalTitle">Add Data</div>
            <button type="button" id="closeAddDataModal" class="close-button">×</button>
        </div>
        <form id="addDataForm" autocomplete="off">
            <input type="hidden" id="addDataIndex" value="">
            <div class="form-group">
                <label for="addDataSection" class="form-label">Section</label>
                <select id="addDataSection" name="section" required="" class="form-select">
                    <option value="">Select Section</option>
                    <option value="era">Eras</option>
                    <option value="event">Major Events</option>
                    <option value="personality">Personalities</option>
                    <option value="war">Wars</option> <!-- NEW: Wars option -->
                </select>
            </div>
            <div class="form-group">
                <label for="addDataName" class="form-label">Name / Title</label>
                <input id="addDataName" name="name" type="text" required="" maxlength="100" class="form-input">
            </div>
            <div class="form-group">
                <label for="addDataStart" class="form-label">Start Date / Birth Date</label>
                <div class="year-input-group">
                    <input id="addDataStart" name="start" type="number" required="" min="0" max="2025" class="form-input" placeholder="E.g. 570">
                    <select id="addDataStartEra" class="form-select">
                        <option value="CE">CE</option>
                        <option value="BCE">BCE</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label for="addDataEnd" class="form-label">End Date / Date of Death</label>
                <div class="year-input-group">
                    <input id="addDataEnd" name="end" type="number" min="0" max="2025" class="form-input" placeholder="(Leave empty if not applicable)">
                    <select id="addDataEndEra" class="form-select">
                        <option value="CE">CE</option>
                        <option value="BCE">BCE</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label for="addDataDescription" class="form-label">Description</label>
                <textarea id="addDataDescription" name="description" rows="2" required="" maxlength="10000" class="form-textarea"></textarea>
            </div>
            <button type="submit" class="submit-button" id="addDataSubmitButton">Add Data</button>
        </form>
    </div>

    <!-- Search Results Modal -->
    <div id="searchResultsModal" class="add-data-modal" style="display: none;">
        <div class="modal-header">
            <div class="modal-title">Search Results</div>
            <button type="button" id="closeSearchResultsModal" class="close-button">×</button>
        </div>
        <div id="searchResultsContent"><div class="search-result-category">Eras</div>
                            <div class="search-result-item" data-year="-322" data-type="era">
                                <div class="item-title">Mauryan Empire</div>
                                <div class="item-subtitle">322 BCE - 185 BCE</div>
                                <div class="item-description">A geographically extensive Iron Age historical power in ancient India, founded by Chandragupta Maurya. Notable for its unified rule over much of the Indian subcontinent and the spread of Buddhism under <span class="highlight">Ashoka</span>.</div>
                            </div>
                        </div>
    </div>

    <!-- Full List Modal -->
    <div id="fullListModal" class="full-list-modal" style="display: none;">
        <div class="full-list-modal-content">
            <button type="button" id="closeFullListModal" class="close-button">×</button>
            <div class="modal-title" id="fullListModalTitle">All Wars</div>
            <div id="fullListContent">
                        <div class="full-list-item">
                            <div class="item-title">Babylonian Conquest and Destruction of First Temple</div>
                            <div class="item-subtitle">586 BCE - 586 BCE</div>
                            <div class="item-description">Nebuchadnezzar II of Babylon conquers Jerusalem, destroys the First Temple, and exiles many Jews to Babylon</div>
                        </div>
                    
                        <div class="full-list-item">
                            <div class="item-title">Battle of Badr</div>
                            <div class="item-subtitle">624 CE - 624 CE</div>
                            <div class="item-description">First major battle between Muslims and Quraysh, decisive Muslim victory establishing Islamic military power.</div>
                        </div>
                    
                        <div class="full-list-item">
                            <div class="item-title">Battle of al-Qadisiyyah</div>
                            <div class="item-subtitle">636 CE - 636 CE</div>
                            <div class="item-description">Decisive Muslim victory, ending Sasanian control west of the Zagros Mountains and leading to the capture of the Sasanian capital, Ctesiphon.</div>
                        </div>
                    
                        <div class="full-list-item">
                            <div class="item-title">Battle of Nahavand</div>
                            <div class="item-subtitle">642 CE - 642 CE</div>
                            <div class="item-description">Final major defeat of the Sasanian army, opening the Iranian plateau to Muslim conquest.</div>
                        </div>
                    
                        <div class="full-list-item">
                            <div class="item-title">Battle of Karbala</div>
                            <div class="item-subtitle">680 CE - 680 CE</div>
                            <div class="item-description">Husayn (AS) was surrounded and martyred by Yazid's forces at Karbala. Abdullah ibn al-Zubayr declared revolt in Mecca.</div>
                        </div>
                    
                        <div class="full-list-item">
                            <div class="item-title">Battle of Guadalete</div>
                            <div class="item-subtitle">711 CE - 711 CE</div>
                            <div class="item-description">The Battle of Guadalete took place in 711 CE in what is now southern Spain, near the Guadalete River in present-day Andalusia.
This decisive battle marked the beginning of the Muslim conquest of the Iberian Peninsula. The Umayyad forces, led by Tariq ibn Ziyad with approximately 7,000 Berber and Arab troops, defeated the much larger Visigothic army of King Roderick (Rodrigo). The Visigothic kingdom, which had ruled much of Iberia for nearly three centuries, collapsed following this defeat and Roderick's death in battle.
The victory opened the way for rapid Muslim expansion across the peninsula, leading to over seven centuries of Islamic rule in various parts of Spain. This battle fundamentally changed the religious, cultural, and political landscape of medieval Iberia.</div>
                        </div>
                    
                        <div class="full-list-item">
                            <div class="item-title">Battle of Tours</div>
                            <div class="item-subtitle">732 CE - 732 CE</div>
                            <div class="item-description">Battle of Tours: Muslim advance into Western Europe halted by Charles Martel.</div>
                        </div>
                    
                        <div class="full-list-item">
                            <div class="item-title">Crusades</div>
                            <div class="item-subtitle">1095 CE - 1291 CE</div>
                            <div class="item-description">A series of religious wars initiated by the Latin Church in the medieval period, primarily aimed at recovering the Holy Land from Islamic rule, but also involving conflicts in Europe.</div>
                        </div>
                    
                        <div class="full-list-item">
                            <div class="item-title">Mongol Invasions and Conquests</div>
                            <div class="item-subtitle">1206 CE - 1337 CE</div>
                            <div class="item-description">Massive military campaigns by the Mongol Empire, creating the largest contiguous land empire in history, devastating populations across Asia and Eastern Europe.</div>
                        </div>
                    
                        <div class="full-list-item">
                            <div class="item-title">Hundred Years' War</div>
                            <div class="item-subtitle">1337 CE - 1453 CE</div>
                            <div class="item-description">A series of conflicts between the Kingdom of England and the Kingdom of France for control of the French throne and territories.</div>
                        </div>
                    
                        <div class="full-list-item">
                            <div class="item-title">American Revolution</div>
                            <div class="item-subtitle">1775 CE - 1783 CE</div>
                            <div class="item-description">The war for independence fought by thirteen British colonies in North America against Great Britain, leading to the formation of the United States.</div>
                        </div>
                    
                        <div class="full-list-item">
                            <div class="item-title">French Revolutionary Wars</div>
                            <div class="item-subtitle">1792 CE - 1802 CE</div>
                            <div class="item-description">A series of conflicts following the French Revolution, fought between the new French Republic and various European monarchies.</div>
                        </div>
                    
                        <div class="full-list-item">
                            <div class="item-title">Napoleonic Wars</div>
                            <div class="item-subtitle">1803 CE - 1815 CE</div>
                            <div class="item-description">A series of major conflicts led by Napoleon Bonaparte's French Empire against various European coalitions, profoundly reshaping the map of Europe.</div>
                        </div>
                    
                        <div class="full-list-item">
                            <div class="item-title">American Civil War</div>
                            <div class="item-subtitle">1861 CE - 1865 CE</div>
                            <div class="item-description">A civil war fought between the United States (Union) and the Confederate States of America (seceding Southern states) over issues including slavery and states' rights.</div>
                        </div>
                    
                        <div class="full-list-item">
                            <div class="item-title">Franco-Prussian War</div>
                            <div class="item-subtitle">1870 CE - 1871 CE</div>
                            <div class="item-description">Conflict between the Second French Empire and the German states led by Prussia, resulting in a decisive Prussian victory and the unification of Germany.</div>
                        </div>
                    
                        <div class="full-list-item">
                            <div class="item-title">World War I</div>
                            <div class="item-subtitle">1914 CE - 1918 CE</div>
                            <div class="item-description">A global war centered in Europe, involving the Central Powers and the Allies, leading to unprecedented casualties and geopolitical shifts.</div>
                        </div>
                    
                        <div class="full-list-item">
                            <div class="item-title">Arab Revolt for Palestine</div>
                            <div class="item-subtitle">1936 CE - 1939 CE</div>
                            <div class="item-description">A large-scale Arab uprising against British rule and increasing Jewish immigration, demanding independence and an end to Zionist land purchases.</div>
                        </div>
                    
                        <div class="full-list-item">
                            <div class="item-title">World War II</div>
                            <div class="item-subtitle">1939 CE - 1945 CE</div>
                            <div class="item-description">The deadliest conflict in human history, involving the Axis Powers and the Allies, leading to global devastation and the reshaping of the international order.</div>
                        </div>
                    </div>
        </div>
    </div>

    <script>
        // Utility Functions
        function formatYear(year) {
            if (year === 9999) return 'Present'; // Special case for 'Present'
            if (year === 0) return '1 BCE'; // Handle year 0 as 1 BCE for display
            return year < 0 ? `${Math.abs(year)} BCE` : `${year} CE`;
        }

        function formatYearRange(start, end) {
            const endYearFormatted = formatYear(end);
            return `${formatYear(start)} - ${endYearFormatted}`;
        }

        // Core data (without duplicate events)
        let rawData = [
    {
        "type": "era",
        "category": "non-muslim-rulers",
        "name": "Roman Kingdom",
        "startYear": -753,
        "endYear": -509,
        "description": "The earliest period of Roman history, ruled by kings including Romulus, the legendary founder of Rome."
    },
    {
        "type": "era",
        "category": "non-muslim-rulers",
        "name": "Roman Republic",
        "startYear": -509,
        "endYear": -27,
        "description": "Republican form of government in Rome, characterized by consuls, senate, and citizen assemblies."
    },
    {
        "type": "era",
        "category": "non-muslim-rulers",
        "name": "Roman Empire (Western)",
        "startYear": -27,
        "endYear": 476,
        "description": "Imperial period of Rome, beginning with Augustus Caesar and lasting until the fall of the Western Empire."
    },
    {
        "type": "era",
        "category": "non-muslim-rulers",
        "name": "Byzantine Empire",
        "startYear": 330,
        "endYear": 1453,
        "description": "Eastern Roman Empire with Constantinople as capital, continuing Roman traditions in the East."
    },
    {
        "type": "era",
        "category": "non-muslim-rulers",
        "name": "Viking Age",
        "startYear": 793,
        "endYear": 1066,
        "description": "Viking raids and expansion reach Western Europe, Britain, Iceland, Greenland, and North America."
    },
    {
        "type": "era",
        "category": "non-muslim-rulers",
        "name": "Holy Roman Empire",
        "startYear": 962,
        "endYear": 1500,
        "description": "Rise of the Holy Roman Empire and formation of feudal states in Europe."
    },
    {
        "type": "era",
        "category": "non-muslim-rulers",
        "name": "Tang Dynasty",
        "startYear": 618,
        "endYear": 907,
        "description": "Chinese imperial dynasty regarded as a high point in Chinese civilization, culture, and international influence."
    },
    {
        "type": "era",
        "category": "muslim-caliphates",
        "name": "Life of Holy Prophet (SAW)",
        "startYear": 570,
        "endYear": 632,
        "description": "The blessed life of Prophet Muhammad (SAW) from birth to death, including the revelation of the Quran and establishment of Islam."
    },
    {
        "type": "era",
        "category": "muslim-caliphates",
        "name": "Rashidun Caliphate",
        "startYear": 632,
        "endYear": 661,
        "description": "The \"Rightly-Guided\" Caliphate under the four successors of Prophet Muhammad: Abu Bakr, Umar, Uthman, and Ali."
    },
    {
        "type": "era",
        "category": "muslim-caliphates",
        "name": "Umayyad Caliphate",
        "startYear": 661,
        "endYear": 750,
        "description": "First hereditary Muslim dynasty with Damascus as capital. Expanded Islamic territories from Spain to India."
    },
    {
        "type": "era",
        "category": "muslim-caliphates",
        "name": "Abbasid Caliphate",
        "startYear": 750,
        "endYear": 1258,
        "description": "Moved the capital to Baghdad, ushering in the Islamic Golden Age of science and culture."
    },
    {
        "type": "era",
        "category": "muslim-caliphates",
        "name": "Umayyad Caliphate of Córdoba",
        "startYear": 756,
        "endYear": 1031,
        "description": "Independent Umayyad emirate and later caliphate in Al-Andalus (Islamic Spain) with Córdoba as capital."
    },
    {
        "type": "era",
        "category": "muslim-caliphates",
        "name": "Fatimid Caliphate",
        "startYear": 909,
        "endYear": 1171,
        "description": "Ismaili Shia caliphate that ruled much of North Africa, the Levant, and Hejaz. Established Cairo as their capital and founded Al-Azhar University."
    },
    {
        "type": "era",
        "category": "muslim-caliphates",
        "name": "Ottoman Empire",
        "startYear": 1299,
        "endYear": 1922,
        "description": "After the Mongols ended the Abbasid Caliphate, the Ottomans rose to power, capturing Constantinople in 1453 and becoming a major Islamic empire until World War I."
    },
    {
        "type": "event",
        "category": "political",
        "name": "Julius Caesar rises to power",
        "startYear": -49,
        "description": "Julius Caesar crosses the Rubicon and begins his rise to become dictator of Rome."
    },
    {
        "type": "event",
        "category": "political",
        "name": "Julius Caesar assassinated",
        "startYear": -44,
        "description": "Julius Caesar is assassinated on the Ides of March, ending his dictatorship."
    },
    {
        "type": "event",
        "category": "religious",
        "name": "Prophet Muhammad (SAW) begins prophethood",
        "startYear": 610,
        "description": "Prophet Muhammad (SAW) receives the first revelation from Angel Jibreel (Gabriel) in the cave of Hira, beginning his prophetic mission."
    },
    {
        "type": "event",
        "category": "religious",
        "name": "Hijra - Migration to Medina",
        "startYear": 622,
        "description": "Prophet Muhammad (SAW) and his followers migrate from Mecca to Medina, marking the beginning of the Islamic calendar."
    },
    {
        "type": "event",
        "category": "conquest",
        "name": "Conquest of Mecca",
        "startYear": 630,
        "description": "Conquest of Mecca: Islam becomes dominant in the Arabian Peninsula under Prophet Muhammad (SAW)."
    },
    {
        "type": "event",
        "category": "conquest",
        "name": "Islamic conquest of Spain begins",
        "startYear": 711,
        "description": "Tariq ibn Ziyad landed in Spain, establishing his camp near Gibraltar."
    },
    {
        "type": "event",
        "category": "political",
        "name": "Abbasid Revolution",
        "startYear": 750,
        "description": "Abbasid replaces Umayyads, capital moves to Baghdad, marking the beginning of the Islamic Golden Age."
    },
    {
        "type": "event",
        "category": "construction",
        "name": "Founding of Baghdad",
        "startYear": 762,
        "description": "Founding of Baghdad as Abbasid capital, becoming a center of learning and culture."
    },
    {
        "type": "event",
        "name": "Saladin recaptures Jerusalem",
        "startYear": 1187,
        "description": "Jerusalem is conquered by\nSalahuddin Ayyubi. He then installed the mimbar of Nuruddin Zangi RA and the first Jummuah salaah in Masjidul Aqsa was performed after approximately 90 years. Tragically this Mimbar was burnt in 1969 by an Australian Zionist, Michael Denis Rohan",
        "category": "custom-event"
    },
    {
        "type": "event",
        "category": "conquest",
        "name": "Mongol sack of Baghdad",
        "startYear": 1258,
        "description": "Hulagu's army captured Baghdad, leading to a devastating massacre and the destruction of the House of Wisdom and its libraries. The caliph was killed."
    },
    {
        "type": "event",
        "category": "conquest",
        "name": "Fall of Constantinople",
        "startYear": 1453,
        "description": "Fall of Constantinople to the Ottomans, marking the end of the Byzantine Empire."
    },
    {
        "type": "personality",
        "category": "prophets",
        "name": "Prophet Muhammad (SAW)",
        "startYear": 570,
        "endYear": 632,
        "description": "The final messenger of Allah, Seal of the Prophets, who received the Quran and established Islam. Leader of the Muslim community and guide for all humanity."
    },
    {
        "type": "personality",
        "name": "Hazrat Ali (AS)",
        "startYear": 601,
        "description": "Cousin and son-in-law of Prophet Muhammad (SAW), the first Imam and fourth Caliph. Known for his courage, wisdom, and justice.",
        "endYear": 661,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "category": "ahl-e-bait",
        "name": "Hazrat Fatima (AS)",
        "startYear": 605,
        "endYear": 632,
        "description": "Beloved daughter of Prophet Muhammad (SAW) and wife of Hazrat Ali (AS). Leader of the women of Paradise."
    },
    {
        "type": "personality",
        "category": "ahl-e-bait",
        "name": "Hazrat Imam Hasan (AS)",
        "startYear": 625,
        "endYear": 670,
        "description": "Eldest son of Hazrat Ali (AS) and Hazrat Fatima (AS), the second Imam. Known for his peace treaty and wisdom."
    },
    {
        "type": "personality",
        "category": "ahl-e-bait",
        "name": "Hazrat Imam Husayn (AS)",
        "startYear": 626,
        "endYear": 680,
        "description": "Younger son of Hazrat Ali (AS) and Hazrat Fatima (AS), the third Imam. Martyred at Karbala while standing against injustice."
    },
    {
        "type": "personality",
        "category": "scholars",
        "name": "Imam Abu Hanifa (RA)",
        "startYear": 699,
        "endYear": 767,
        "description": "Founder of the Hanafi school of Islamic jurisprudence, the most widely followed school in the Muslim world."
    },
    {
        "type": "personality",
        "category": "scholars",
        "name": "Imam Malik ibn Anas (RA)",
        "startYear": 711,
        "endYear": 795,
        "description": "Founder of the Maliki school of Islamic jurisprudence, author of Al-Muwatta, one of the earliest collections of Hadith."
    },
    {
        "type": "personality",
        "category": "scholars",
        "name": "Imam Al-Shafi'i (RA)",
        "startYear": 767,
        "endYear": 820,
        "description": "Founder of the Shafi'i school of Islamic jurisprudence, student of Imam Malik, known for systematizing Islamic legal methodology."
    },
    {
        "type": "personality",
        "category": "scholars",
        "name": "Imam Ahmad ibn Hanbal (RA)",
        "startYear": 780,
        "endYear": 855,
        "description": "Founder of the Hanbali school of Islamic jurisprudence, compiler of the Musnad Ahmad, a major collection of Hadith."
    },
    {
        "type": "personality",
        "category": "scholars",
        "name": "Imam Al-Bukhari (RA)",
        "startYear": 810,
        "endYear": 870,
        "description": "Compiler of Sahih al-Bukhari, considered the most authentic collection of Hadith in Sunni Islam."
    },
    {
        "type": "personality",
        "category": "scientists",
        "name": "Jabir ibn Hayyan (RA)",
        "startYear": 721,
        "endYear": 815,
        "description": "Father of Chemistry, pioneered experimental methodology and discovered numerous chemical processes and compounds."
    },
    {
        "type": "personality",
        "category": "scientists",
        "name": "Al-Khwarizmi (RA)",
        "startYear": 780,
        "endYear": 850,
        "description": "Father of Algebra, mathematician and astronomer who introduced the decimal system and algebraic methods to Europe."
    },
    {
        "type": "personality",
        "category": "scientists",
        "name": "Ibn Sina (Avicenna) (RA)",
        "startYear": 980,
        "endYear": 1037,
        "description": "Prince of Physicians, philosopher and scientist whose Canon of Medicine was used in Europe for 600 years."
    },
    {
        "type": "personality",
        "category": "scientists",
        "name": "Ibn al-Haytham (Alhazen) (RA)",
        "startYear": 965,
        "endYear": 1040,
        "description": "Father of modern optics and scientific method, made groundbreaking discoveries in physics, mathematics, and astronomy."
    },
    {
        "type": "personality",
        "category": "rulers",
        "name": "Salahuddin Ayubi (Saladin)",
        "startYear": 1137,
        "endYear": 1193,
        "description": "Kurdish Muslim military leader, unified Egypt and Syria, recaptured Jerusalem from the Crusaders in 1187, legendary for his chivalry and strategic brilliance."
    },
    {
        "type": "personality",
        "category": "rulers",
        "name": "Hulagu Khan",
        "startYear": 1217,
        "endYear": 1265,
        "description": "Grandson of Genghis Khan, led the Mongol conquest of the Islamic world, destroyed Baghdad in 1258, ending the Abbasid Caliphate."
    },
    {
        "type": "personality",
        "category": "scientists",
        "name": "Galileo Galilei",
        "startYear": 1564,
        "endYear": 1642,
        "description": "Italian physicist and astronomer, born in Pisa, worked in Florence and Padua. Pioneered modern science and championed heliocentrism."
    },
    {
        "type": "personality",
        "category": "scientists",
        "name": "Isaac Newton",
        "startYear": 1642,
        "endYear": 1727,
        "description": "English physicist, mathematician, and astronomer, born in Woolsthorpe, worked in Cambridge. Formulated the laws of motion and universal gravitation."
    },
    {
        "type": "personality",
        "category": "scientists",
        "name": "Albert Einstein",
        "startYear": 1879,
        "endYear": 1955,
        "description": "German-born physicist, born in Ulm, worked in Zurich, Prague, Berlin, Princeton. Developed the theory of relativity."
    },
    {
        "type": "personality",
        "category": "rulers",
        "name": "Caliph al-Ma'mun",
        "startYear": 786,
        "endYear": 833,
        "description": "Seventh Abbasid caliph, known for promoting intellectual and scientific inquiry during the Islamic Golden Age."
    },
    {
        "type": "personality",
        "category": "scholars",
        "name": "Omar Khayyam",
        "startYear": 1048,
        "endYear": 1131,
        "description": "Persian polymath: mathematician, astronomer, and poet. Born in Nishapur (Iran), worked in Nishapur, Baghdad (Iran, Iraq)."
    },
    {
        "type": "personality",
        "category": "scholars",
        "name": "Hazrat Khwaja Nizamuddin Auliya",
        "startYear": 1238,
        "endYear": 1325,
        "description": "One of the most famous Sufi saints of the Chishtiyya order in the Indian subcontinent."
    },
    {
        "type": "personality",
        "category": "scientists",
        "name": "Stephen Hawking",
        "startYear": 1942,
        "endYear": 2018,
        "description": "British theoretical physicist and cosmologist. Born in Oxford (England), worked in Cambridge (England). Known for his work on black holes and relativity."
    },
    {
        "type": "personality",
        "category": "scholars",
        "name": "Hazrat Baba Farid Ganj Shakar",
        "startYear": 1173,
        "endYear": 1266,
        "description": "A great Sufi saint and mystic of the Chishti Order, whose teachings influenced many in the Indian subcontinent."
    },
    {
        "type": "personality",
        "category": "scientists",
        "name": "Johannes Kepler",
        "startYear": 1571,
        "endYear": 1630,
        "description": "German astronomer and mathematician. Born in Weil der Stadt (Germany), worked in Prague (Czech Republic). Best known for his laws of planetary motion."
    },
    {
        "type": "personality",
        "category": "scientists",
        "name": "Alan Turing",
        "startYear": 1912,
        "endYear": 1954,
        "description": "British mathematician and computer scientist. Born in Maida Vale (England), worked in Bletchley Park, Cambridge (England). Considered the father of theoretical computer science and artificial intelligence."
    },
    {
        "type": "personality",
        "category": "rulers",
        "name": "Noorudin Zengi",
        "startYear": 1118,
        "endYear": 1174,
        "description": "Transformed Muslim resistance from mere military campaigns into a religious revival. He unified Syria under a single Muslim ruler for the first time since the Crusades began, established madrasas, promoted Islamic scholarship and created the ideological framework that would inspire Saladin's later victories."
    },
    {
        "type": "personality",
        "category": "scientists",
        "name": "Niels Bohr",
        "startYear": 1885,
        "endYear": 1962,
        "description": "Danish physicist who made foundational contributions to understanding atomic structure and quantum theory. Born and worked in Copenhagen (Denmark)."
    },
    {
        "type": "personality",
        "category": "rulers",
        "name": "Imadudin Zengi",
        "startYear": 1085,
        "endYear": 1146,
        "description": "Founded the Zengid dynasty and began the Muslim counter-offensive against the Crusader states, titled \"scourge of the Franks\"."
    },
    {
        "type": "personality",
        "category": "scientists",
        "name": "Erwin Schrödinger",
        "startYear": 1887,
        "endYear": 1961,
        "description": "Austrian physicist who developed a number of fundamental results in quantum theory, including the Schrödinger equation. Born in Vienna (Austria), worked in Vienna (Austria)."
    },
    {
        "type": "personality",
        "category": "scholars",
        "name": "Abu Hamid al-Ghazali",
        "startYear": 1058,
        "endYear": 1111,
        "description": "Influential Persian polymath, known for refuting Mu‘tazili arguments and advocating for spiritual experience over dry philosophical arguments."
    },
    {
        "type": "personality",
        "category": "scholars",
        "name": "Ibn Khaldun",
        "startYear": 1332,
        "endYear": 1406,
        "description": "Arab sociologist, philosopher, and historian. Born in Tunis (Tunisia), worked in Cairo (Egypt). Considered one of the founding fathers of modern sociology, historiography, and economics."
    },
    {
        "type": "personality",
        "category": "rulers",
        "name": "Al-Hakim bi-Amr Allah",
        "startYear": 985,
        "endYear": 1021,
        "description": "Sixth Fatimid caliph, known for his erratic, unpredictable, and often brutal behavior. Became caliph at age 11."
    },
    {
        "type": "personality",
        "category": "scientists",
        "name": "Marie Curie",
        "startYear": 1867,
        "endYear": 1934,
        "description": "Polish and naturalized-French physicist and chemist. Born in Warsaw (Poland), worked in Paris (France). Pioneer in radioactivity and the first woman to win a Nobel Prize."
    },
    {
        "type": "personality",
        "category": "rulers",
        "name": "Mahmud of Ghazni",
        "startYear": 971,
        "endYear": 1030,
        "description": "A Turkic sultan who led seventeen military campaigns deep into India, establishing the Ghaznavid Empire."
    },
    {
        "type": "personality",
        "category": "scholars",
        "name": "Hazrat Khwaja Moinuddin Chishti",
        "startYear": 1143,
        "endYear": 1236,
        "description": "One of the most revered Sufi saints of the Chishti Order in the Indian subcontinent, known for spreading Islam through love and peace."
    },
    {
        "type": "personality",
        "category": "scientists",
        "name": "Charles Darwin",
        "startYear": 1809,
        "endYear": 1882,
        "description": "English naturalist, geologist, and biologist. Born in Shrewsbury (England), worked in Down House (England). Best known for his contributions to the science of evolution."
    },
    {
        "type": "personality",
        "category": "rulers",
        "name": "Ubaidullah al-Mahdi",
        "startYear": 873,
        "endYear": 934,
        "description": "Founder and first caliph of the Fatimid Dynasty, one of the most significant rival caliphates to the Abbasids."
    },
    {
        "type": "personality",
        "category": "rulers",
        "name": "Sultan Baibars I (Al-Malik al-Zahir)",
        "startYear": 1223,
        "endYear": 1277,
        "description": "The Mamluk sultan who systematically dismantled the Crusader states and halted Mongol expansion into Egypt and Syria. Known as the \"Crossbow\" for his speed and precision."
    },
    {
        "type": "personality",
        "category": "scholars",
        "name": "Abu al-Hasan al-Ash'ari",
        "startYear": 874,
        "endYear": 936,
        "description": "One of the most influential Islamic theologians whose ideas came to dominate Sunni theological thought. His story represents a fascinating intellectual journey and theological transformation."
    },
    {
        "type": "personality",
        "category": "scientists",
        "name": "Michael Faraday",
        "startYear": 1791,
        "endYear": 1867,
        "description": "British scientist who contributed to the study of electromagnetism and electrochemistry. Born in Newington (England), worked in London (England)."
    },
    {
        "type": "personality",
        "category": "scholars",
        "name": "Abdullah Shah Ghazi",
        "startYear": 720,
        "endYear": 770,
        "description": "A revered Sufi saint and descendant of Prophet Muhammad (SAW), whose shrine is a prominent landmark in Karachi, Pakistan."
    },
    {
        "type": "era",
        "name": "Achaemenid Empire (First Persian Empire)",
        "startYear": -550,
        "description": "Cyrus the Great unifies various Iranian tribes and conquers the Median Empire, Lydia, and the Neo-Babylonian Empire, establishing the vast Achaemenid Empire.",
        "endYear": -330,
        "category": "custom-era"
    },
    {
        "type": "event",
        "name": "Achaemenid Empire (First Persian Empire) founded by Cyrus the Great",
        "startYear": -550,
        "description": "Cyrus unifies various Iranian tribes and conquers the Median Empire, Lydia, and the Neo-Babylonian Empire, establishing the vast Achaemenid Empire.",
        "category": "custom-event"
    },
    {
        "type": "event",
        "name": "End of Achaemenid Empire (First Persian Empire)",
        "startYear": -330,
        "description": "Alexander the Great's Macedonian forces decisively defeat Darius III, the last Achaemenid king, at battles like Issus and Gaugamela. Persepolis is sacked and burned, marking the end of the Achaemenid Empire.",
        "category": "custom-event"
    },
    {
        "type": "era",
        "name": "Sasanian Empire (Second Persian Empire)",
        "startYear": 224,
        "description": "Ardashir I overthrows the Parthian Empire and establishes the Sasanian Empire, aiming to revive the glory of the Achaemenids. Zoroastrianism is established as the state religion.",
        "endYear": 651,
        "category": "custom-era"
    },
    {
        "type": "event",
        "name": "Muslim Conquest (Initial Incursions) in Sasanian Empire (Second Persian Empire)",
        "startYear": 633,
        "description": "First Arab incursions into Mesopotamia, then a Sasanian province.",
        "category": "custom-event"
    },
    {
        "type": "war",
        "name": "Battle of al-Qadisiyyah",
        "startYear": 636,
        "description": "Decisive Muslim victory, ending Sasanian control west of the Zagros Mountains and leading to the capture of the Sasanian capital, Ctesiphon.",
        "endYear": 636,
        "category": "custom-war"
    },
    {
        "type": "war",
        "name": "Battle of Nahavand",
        "startYear": 642,
        "description": "Final major defeat of the Sasanian army, opening the Iranian plateau to Muslim conquest.",
        "endYear": 642,
        "category": "custom-war"
    },
    {
        "type": "event",
        "name": "End of Sasanian Empire (Second Persian Empire)",
        "startYear": 651,
        "description": "Yazdegerd III, the last Sasanian Shahanshah, is assassinated in Merv, marking the definitive end of the Sasanian Empire and its incorporation into the Islamic Caliphate.",
        "category": "custom-event"
    },
    {
        "type": "war",
        "name": "Battle of Badr",
        "startYear": 624,
        "description": "First major battle between Muslims and Quraysh, decisive Muslim victory establishing Islamic military power.",
        "endYear": 624,
        "category": "custom-war"
    },
    {
        "type": "personality",
        "name": "Napoleon Bonaparte",
        "startYear": 1769,
        "description": "A French military leader and emperor who rose to prominence during the French Revolution, conquered much of Europe in the early 19th century, and left a lasting impact on European law and military organization with the Napoleonic Code.",
        "endYear": 1821,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Genghis Khan",
        "startYear": 1162,
        "description": "The founder and first Great Khan of the Mongol Empire, which became the largest contiguous land empire in history. He united the nomadic tribes of the Mongolian plateau and initiated a series of military campaigns that conquered vast areas of Eurasia.",
        "endYear": 1227,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Mayer Amschel Rothschild",
        "startYear": 1744,
        "description": "A German-Jewish banker and the founder of the Rothschild banking dynasty. He established a highly successful international finance house through his five sons, who set up branches in major European cities, creating an influential financial network.",
        "endYear": 1812,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "David Ben-Gurion",
        "startYear": 1886,
        "description": "The primary national founder and first Prime Minister of the State of Israel. A prominent Zionist leader, he played a crucial role in establishing Israel as an independent state in 1948 and building its institutions.",
        "endYear": 1973,
        "category": "custom-personality"
    },
    {
        "type": "era",
        "name": "Mongol Empire",
        "startYear": 1206,
        "description": "Founded by Genghis Khan, the Mongol Empire was the largest contiguous land empire in history. It facilitated widespread trade, cultural exchange (Pax Mongolica), and the transfer of technologies across Eurasia, but eventually fragmented into several independent khanates due to succession disputes and its immense size.",
        "endYear": 1368,
        "category": "custom-era"
    },
    {
        "type": "era",
        "name": "Neo-Assyrian Empire",
        "startYear": -911,
        "description": "A dominant Mesopotamian empire known for its military might, vast conquests across the Near East, and advanced administrative and engineering capabilities",
        "endYear": -609,
        "category": "custom-era"
    },
    {
        "type": "era",
        "name": "Mauryan Empire",
        "startYear": -322,
        "description": "A geographically extensive Iron Age historical power in ancient India, founded by Chandragupta Maurya. Notable for its unified rule over much of the Indian subcontinent and the spread of Buddhism under Ashoka.",
        "endYear": -185,
        "category": "custom-era"
    },
    {
        "type": "era",
        "name": "Han Dynasty (China)",
        "startYear": -206,
        "description": "A golden age in Chinese history, characterized by significant advancements in science, technology (paper, compass), art, and the establishment of the Silk Road. Laid the foundation for much of subsequent Chinese culture and identity.",
        "endYear": -220,
        "category": "custom-era"
    },
    {
        "type": "era",
        "name": "Gupta Empire (India)",
        "startYear": 320,
        "description": "Considered a \"Golden Age\" of India, marked by significant achievements in science, mathematics (concept of zero, decimal system), astronomy, art, and literature.",
        "endYear": 550,
        "category": "custom-era"
    },
    {
        "type": "era",
        "name": "Holy Roman Empire",
        "startYear": 962,
        "description": "A complex political entity in Central Europe, evolving from the Frankish Empire. It was a loose confederation of territories, often led by an emperor who held spiritual authority. Influential in European politics and culture for centuries.",
        "endYear": 1806,
        "category": "custom-era"
    },
    {
        "type": "era",
        "name": "Ming Dynasty (China)",
        "startYear": 1368,
        "description": "Followed the Mongol Yuan Dynasty in China, known for its extensive naval expeditions (Zheng He), grand construction projects (Great Wall, Forbidden City), and significant population growth and economic development.",
        "endYear": 1644,
        "category": "custom-era"
    },
    {
        "type": "era",
        "name": "Spanish Empire",
        "startYear": 1492,
        "description": "One of the largest empires in history, built during the Age of Discovery. It controlled vast territories in the Americas, Africa, and Asia, playing a major role in global trade and cultural exchange. (End year here refers to the loss of its last major colonies in the Spanish-American War).",
        "endYear": 1898,
        "category": "custom-era"
    },
    {
        "type": "era",
        "name": "Mughal Empire",
        "startYear": 1562,
        "description": "An Islamic imperial power that ruled much of the Indian subcontinent. Renowned for its architectural achievements (Taj Mahal), administrative sophistication, and cultural synthesis of Islamic and Indian traditions. (End year here refers to the formal end after the Indian Rebellion).",
        "endYear": 1857,
        "category": "custom-era"
    },
    {
        "type": "era",
        "name": "Russian Empire",
        "startYear": 1721,
        "description": "A vast empire stretching across Eastern Europe and Asia, formed under Peter the Great. Expanded significantly and became a major European and global power until its collapse during World War I.",
        "endYear": 1917,
        "category": "custom-era"
    },
    {
        "type": "era",
        "name": "British Empire",
        "startYear": 1700,
        "description": "The largest empire in history, at its peak covering a quarter of the world's land area and population. Profoundly influenced global politics, economy, and culture. (End year is approximate, marking the handover of Hong Kong, a significant final colonial act).",
        "endYear": 1997,
        "category": "custom-era"
    },
    {
        "type": "personality",
        "name": "Zahir-ud-din Muhammad Babur",
        "startYear": 1483,
        "description": "The founder of the Mughal Empire in India. A descendant of Timur and Genghis Khan, he established his rule in Hindustan after defeating the Delhi Sultanate in the Battle of Panipat in 1526. He was also a skilled poet and chronicler, famous for his autobiography, the Baburnama.",
        "endYear": 1530,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Nasir-ud-din Muhammad Humayun",
        "startYear": 1508,
        "description": "The second Mughal emperor, whose reign was marked by significant challenges, including a period of exile from India after being overthrown by Sher Shah Suri. He eventually regained his throne shortly before his death. Despite his turbulent reign, he contributed to the Mughal artistic and cultural legacy.",
        "endYear": 1556,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Abu'l-Fath Jalal-ud-din Muhammad Akbar",
        "startYear": 1542,
        "description": "Widely regarded as the greatest of the Mughal emperors. He expanded the empire significantly, established a highly centralized administration, and fostered a policy of religious tolerance (Din-i Ilahi) and cultural integration, which led to a flourishing of art, architecture, and literature during his reign.",
        "endYear": 1605,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Muhi-ud-din Muhammad Aurangzeb",
        "startYear": 1618,
        "description": "The sixth Mughal emperor, under whom the empire reached its greatest territorial extent. A devout and conservative ruler, his reign was marked by religious orthodoxy, the imposition of Jizya (poll tax) on non-Muslims, and prolonged military campaigns, particularly in the Deccan, which ultimately strained the empire's resources.",
        "endYear": 1707,
        "category": "custom-personality"
    },
    {
        "type": "event",
        "name": "First Temple (Solomon's Temple) built",
        "startYear": -960,
        "description": "King Solomon builds the First Temple in Jerusalem, making it the focal point of Jewish worship.",
        "category": "custom-event"
    },
    {
        "type": "event",
        "name": "Persian Conquest of Jerusalem and Return of Jews",
        "startYear": -539,
        "description": "Cyrus the Great of Persia conquers Babylon and allows Jews to return to Jerusalem and rebuild their Temple.",
        "category": "custom-event"
    },
    {
        "type": "event",
        "name": "Second Temple built",
        "startYear": -516,
        "description": "The Second Temple in Jerusalem was a monumental undertaking that marked a pivotal period of restoration for the Jewish people after their return from Babylonian exile. Following Cyrus the Great's decree in 538 BCE, which permitted the exiled Jews to return to their homeland and rebuild their Temple, the initial foundation was laid. However, the project faced significant delays and opposition from neighboring peoples, causing work to halt for many years. It was not until the second year of King Darius I's reign (520 BCE), spurred by the prophetic urgings of Haggai and Zechariah, that the rebuilding efforts resumed with renewed vigor. Under the leadership of Zerubbabel, the governor, and Joshua, the High Priest, the community dedicated themselves to the task. Despite challenges, the construction progressed steadily, and the Second Temple was finally completed and dedicated in 516 BCE, approximately 70 years after the destruction of the First Temple by the Babylonians. While it may not have matched the grandeur of Solomon's original Temple, its completion signified the re-establishment of Jewish religious and communal life in Jerusalem under Persian suzerainty, marking the beginning of the Second Temple period.",
        "category": "custom-event"
    },
    {
        "type": "event",
        "name": "Alexander the Great conquers Palestine",
        "startYear": -332,
        "description": "Alexander's conquest brings the region under Hellenistic (Greek) influence, leading to a period of cultural change.",
        "category": "custom-event"
    },
    {
        "type": "era",
        "name": "Maccabean Revolt and Hasmonean Kingdom (Jerusalem)",
        "startYear": -167,
        "description": "A Jewish revolt against Hellenistic rule leads to the establishment of the independent Hasmonean Kingdom, which expands its control over much of Palestine.",
        "endYear": -160,
        "category": "custom-era"
    },
    {
        "type": "event",
        "name": "Roman Conquest of Jerusalem",
        "startYear": 63,
        "description": "Roman General Pompey conquers Jerusalem, ending Hasmonean independence and establishing Roman rule over Judea.",
        "category": "custom-event"
    },
    {
        "type": "event",
        "name": "Crucifixion of Hazrat Isa AS",
        "startYear": 30,
        "description": "Jesus is crucified in Jerusalem under Roman rule, a pivotal event in Christianity.",
        "category": "custom-event"
    },
    {
        "type": "event",
        "name": "Destruction of Second Temple by Romans",
        "startYear": 70,
        "description": "Following the Great Jewish Revolt, Roman forces under Titus destroy Jerusalem and the Second Temple. A significant turning point for Jewish history.",
        "category": "custom-event"
    },
    {
        "type": "event",
        "name": "Bar Kokhba Revolt and Renaming of Judea to \"Syria Palaestina\"",
        "startYear": 135,
        "description": "Another major Jewish revolt is crushed by the Romans. Emperor Hadrian renames Jerusalem to \"Aelia Capitolina\" and Judea to \"Syria Palaestina\" (Palestine), largely to erase Jewish ties to the land. Jews are largely forbidden from entering Jerusalem.",
        "category": "custom-event"
    },
    {
        "type": "event",
        "name": "Muslim Conquest of Jerusalem",
        "startYear": 638,
        "description": "Caliph Umar ibn al-Khattab accepts the surrender of Jerusalem, marking the beginning of continuous Muslim rule for centuries. In 636 the Sahabah R.A gain victory\nover the Romans in the battle of Yarmuk and they complete the\nconquest of Palestine and the rest of Greater Syria and then march onto Jerusalem and lay siege. The Christians find it hard to withhold and decide to surrender",
        "category": "custom-event"
    },
    {
        "type": "event",
        "name": "Dome of the Rock built at Jerusalem",
        "startYear": 685,
        "description": "Abdul Malik bin Marwan the\nUmayyad Khalifah builds the dome of the rock. It is a magnificent building within the boundary of Masjidul Aqsa.\n\nThe Dome of the Rock is built on a rock which is venerated by Jews. Ka’ab Ahbar was of the opinion that this rock signified the position of the Qiblah of Baitul Maqdis toward which Sayyidinaa Moosa A.S. prayed. Sayyidinaa Umar R.A. did not entirely agree with this opinion. The artisans who supervised the construction, do not take any payment for their work. It was later renovated in 1545 by Sultan Sulaiman the Magnificent and then restored (the outer tiles) in 1956-62. The golden dome that crowns the Dome of the Rock was originally made of gold (era of Abdul Malik), but was replaced with\ncopper and then aluminium. The\naluminium is now covered with gold leaf, a donation from the late King Hussein of Jordan.",
        "category": "custom-event"
    },
    {
        "type": "event",
        "name": "First Crusade captures Jerusalem",
        "startYear": 1099,
        "description": "The crusaders take over Baitul\nMaqdis and a massacre follows\n\"So terrible, it is said, was the carnage which followed that the horses of the crusaders who rode up to the mosque of Omar were knee-deep in the stream of blood. Infants were seized by their feet and dashed against the walls or whirled over the battlements, while the Jews were all burnt alive in the synagogue.\" 70,000 people were massacred by the Crusaders. For 85-90 years no Salaah was performed in Masjidul Aqsa",
        "category": "custom-event"
    },
    {
        "type": "event",
        "name": "Mamluk Rule begins at Jerusalem",
        "startYear": 1260,
        "description": "The Mamluks of Egypt establish control over Palestine, building many mosques and religious institutions.",
        "category": "custom-event"
    },
    {
        "type": "event",
        "name": "Ottoman Conquest of Palestine",
        "startYear": 1517,
        "description": "The Ottoman Empire takes control of Palestine, integrating it into its vast domain. This rule lasts for approximately 400 years.",
        "category": "custom-event"
    },
    {
        "type": "event",
        "name": "Balfour Declaration & British Capture of Jerusalem",
        "startYear": 1917,
        "description": "The Balfour Declaration was a public statement issued by the British government on November 2, 1917, during World War I. It was a letter from British Foreign Secretary Arthur Balfour to Lord Lionel Walter Rothschild, a prominent figure in the British Jewish community. The declaration expressed British support for \"the establishment in Palestine of a national home for the Jewish people,\" with the caveat that \"nothing shall be done which may prejudice the civil and religious rights of existing non-Jewish communities in Palestine.\" This statement was a significant diplomatic move, intended to garner Jewish support for the Allied war effort, and it later became a core component of the British Mandate for Palestine after the dissolution of the Ottoman Empire. The declaration is widely considered a foundational document in the history of the Israeli-Palestinian conflict, as it laid the groundwork for the eventual establishment of the State of Israel, while also generating considerable tension and opposition from the Arab population of Palestine, who constituted the majority.",
        "category": "custom-event"
    },
    {
        "type": "event",
        "name": "British Mandate for Palestine",
        "startYear": 1922,
        "description": "The League of Nations grants Britain a mandate over Palestine, incorporating the principles of the Balfour Declaration. Jewish immigration increases, leading to growing Arab nationalism and resistance.",
        "category": "custom-event"
    },
    {
        "type": "war",
        "name": "Arab Revolt for Palestine",
        "startYear": 1936,
        "description": "A large-scale Arab uprising against British rule and increasing Jewish immigration, demanding independence and an end to Zionist land purchases.",
        "endYear": 1939,
        "category": "custom-war"
    },
    {
        "type": "event",
        "name": "End of British Mandate & Arab-Israeli War (Nakba/War of Independence)",
        "startYear": 1948,
        "description": "British Mandate ends. Israel declares independence. A war ensues between Israel and surrounding Arab states. As a result, Israel controls significantly more territory than the UN plan, and hundreds of thousands of Palestinians become refugees (the Nakba - catastrophe). Jerusalem is divided.",
        "category": "custom-event"
    },
    {
        "type": "war",
        "name": "Crusades",
        "startYear": 1095,
        "description": "A series of religious wars initiated by the Latin Church in the medieval period, primarily aimed at recovering the Holy Land from Islamic rule, but also involving conflicts in Europe.",
        "endYear": 1291,
        "category": "custom-war"
    },
    {
        "type": "war",
        "name": "Mongol Invasions and Conquests",
        "startYear": 1206,
        "description": "Massive military campaigns by the Mongol Empire, creating the largest contiguous land empire in history, devastating populations across Asia and Eastern Europe.",
        "endYear": 1337,
        "category": "custom-war"
    },
    {
        "type": "war",
        "name": "Hundred Years' War",
        "startYear": 1337,
        "description": "A series of conflicts between the Kingdom of England and the Kingdom of France for control of the French throne and territories.",
        "endYear": 1453,
        "category": "custom-war"
    },
    {
        "type": "war",
        "name": "American Revolution",
        "startYear": 1775,
        "description": "The war for independence fought by thirteen British colonies in North America against Great Britain, leading to the formation of the United States.",
        "endYear": 1783,
        "category": "custom-war"
    },
    {
        "type": "war",
        "name": "French Revolutionary Wars",
        "startYear": 1792,
        "description": "A series of conflicts following the French Revolution, fought between the new French Republic and various European monarchies.",
        "endYear": 1802,
        "category": "custom-war"
    },
    {
        "type": "war",
        "name": "Napoleonic Wars",
        "startYear": 1803,
        "description": "A series of major conflicts led by Napoleon Bonaparte's French Empire against various European coalitions, profoundly reshaping the map of Europe.",
        "endYear": 1815,
        "category": "custom-war"
    },
    {
        "type": "war",
        "name": "American Civil War",
        "startYear": 1861,
        "description": "A civil war fought between the United States (Union) and the Confederate States of America (seceding Southern states) over issues including slavery and states' rights.",
        "endYear": 1865,
        "category": "custom-war"
    },
    {
        "type": "war",
        "name": "Franco-Prussian War",
        "startYear": 1870,
        "description": "Conflict between the Second French Empire and the German states led by Prussia, resulting in a decisive Prussian victory and the unification of Germany.",
        "endYear": 1871,
        "category": "custom-war"
    },
    {
        "type": "war",
        "name": "World War I",
        "startYear": 1914,
        "description": "A global war centered in Europe, involving the Central Powers and the Allies, leading to unprecedented casualties and geopolitical shifts.",
        "endYear": 1918,
        "category": "custom-war"
    },
    {
        "type": "war",
        "name": "World War II",
        "startYear": 1939,
        "description": "The deadliest conflict in human history, involving the Axis Powers and the Allies, leading to global devastation and the reshaping of the international order.",
        "endYear": 1945,
        "category": "custom-war"
    },
    {
        "type": "personality",
        "name": "Hazrat Abu Bakar RA",
        "startYear": 573,
        "description": "Abu Bakr was Prophet Muhammad's closest companion and father-in-law. He became the first Caliph after Muhammad's death, chosen through consultation among the senior companions. His major achievements include consolidating the Arabian Peninsula by suppressing the Ridda (apostasy) wars, preserving the unity of the early Muslim community, and initiating the compilation of the Quran into a single manuscript. He also began the expansion beyond Arabia by sending armies into Iraq and Syria.",
        "endYear": 634,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Umar ibn al-Khattab RA",
        "startYear": 584,
        "description": "Known as \"Al-Farooq\" (the one who distinguishes between right and wrong), Umar was initially an opponent of Islam who later became one of its strongest supporters. His caliphate marked the most rapid expansion in Islamic history, conquering the Sassanid Empire, much of the Byzantine Empire, Egypt, and establishing Islamic rule from Spain to Central Asia. He established the Islamic calendar, created the administrative system (diwan), founded new cities like Basra and Kufa, and was known for his justice and simple lifestyle.",
        "endYear": 644,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Hazrat Uthman ibn Affan RA",
        "startYear": 576,
        "description": "Uthman was an early convert to Islam and one of the wealthiest companions of the Prophet. He was known for his generosity and had married two of Prophet Muhammad's daughters. His most significant achievement was commissioning the standardized version of the Quran that is used today, ensuring uniformity across the expanding Islamic empire. He continued territorial expansion into North Africa and Central Asia, but his later years were marked by internal dissent that ultimately led to his assassination.",
        "endYear": 656,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Mayer Amschel Rothschild",
        "startYear": 1744,
        "description": "Established banking house in Frankfurt; sent five sons to major European cities to establish banks\nCreated the foundation of international banking; established the family's multi-generational wealth strategy",
        "endYear": 1812,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Nathan Mayer Rothschild",
        "startYear": 1777,
        "description": "Third son, established London branch\nFounded N M Rothschild & Sons in London; financed British war effort against Napoleon; pioneered international bond trading\nBecame the wealthiest person in the world; dominated London financial markets; established Britain as global financial center",
        "endYear": 1836,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Carl Mayer von Rothschild",
        "startYear": 1788,
        "description": "Fourth son, established Naples branch\nFounded banking operations in Naples and later Italy; received noble title from Austrian Emperor\nExtended family influence into Southern Europe; built strong relationships with Italian nobility",
        "endYear": 1855,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Salomon Mayer von Rothschild",
        "startYear": 1774,
        "description": "Second son, established Vienna branch\nFounded banking house in Vienna; financed Austrian government and railway construction\nDominated Central European finance; played key role in financing industrial revolution in Austria",
        "endYear": 1855,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "James Mayer de Rothschild",
        "startYear": 1792,
        "description": "Youngest son, established Paris branch\nFounded Rothschild Frères in Paris; financed French railways; built Château de Ferrières\nBecame the richest man in France; financed major infrastructure projects; influenced French economic policy",
        "endYear": 1868,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Amschel Mayer von Rothschild",
        "startYear": 1773,
        "description": "Eldest son, remained in Frankfurt\nManaged original Frankfurt banking house; maintained family coordination center\nServed as family patriarch; coordinated activities between the five branches",
        "endYear": 1855,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Walter Rothschild, 2nd Baron",
        "startYear": 1868,
        "description": "British naturalist and politician\nReceived Balfour Declaration; renowned zoologist; established natural history museum\nBalfour Declaration addressed to him influenced creation of Israel; advanced scientific knowledge",
        "endYear": 1937,
        "category": "custom-personality"
    },
    {
        "type": "war",
        "name": "Battle of Guadalete",
        "startYear": 711,
        "description": "The Battle of Guadalete took place in 711 CE in what is now southern Spain, near the Guadalete River in present-day Andalusia.\nThis decisive battle marked the beginning of the Muslim conquest of the Iberian Peninsula. The Umayyad forces, led by Tariq ibn Ziyad with approximately 7,000 Berber and Arab troops, defeated the much larger Visigothic army of King Roderick (Rodrigo). The Visigothic kingdom, which had ruled much of Iberia for nearly three centuries, collapsed following this defeat and Roderick's death in battle.\nThe victory opened the way for rapid Muslim expansion across the peninsula, leading to over seven centuries of Islamic rule in various parts of Spain. This battle fundamentally changed the religious, cultural, and political landscape of medieval Iberia.",
        "endYear": 711,
        "category": "custom-war"
    },
    {
        "type": "era",
        "name": "Visigothic Kingdom",
        "startYear": 418,
        "description": "The Visigoths created the most successful and longest-lasting of the barbarian successor kingdoms to Rome in Western Europe. They ruled most of the Iberian Peninsula from their capital at Toledo, developing a hybrid culture that combined Germanic, Roman, and Christian elements. Initially Arian Christians, they converted to Catholicism in 589 CE, helping unify their kingdom. The Visigoths established sophisticated legal codes, maintained much of Roman administrative structure, and created a unique artistic and architectural style. Their kingdom came to an abrupt end when internal political strife weakened their defenses, allowing the relatively small Muslim invasion force to achieve their stunning victory in 711 CE.",
        "endYear": 711,
        "category": "custom-era"
    },
    {
        "type": "personality",
        "name": "Abd al-Rahman I - \"The Falcon of Andalus\"",
        "startYear": 731,
        "description": "Abd al-Rahman I (731-788 CE), known as \"The Falcon of Andalus,\" was an Umayyad prince who escaped the Abbasid massacre of his family in 750 CE and fled to Spain after years of wandering through North Africa. The grandson of Caliph Hisham ibn Abd al-Malik, he arrived in Al-Andalus in 755 CE and used his Umayyad lineage to rally support among Syrian Arab settlers and Berber tribes dissatisfied with Abbasid rule. In 756 CE, he founded the independent Emirate of Córdoba, breaking Al-Andalus away from Abbasid control and establishing Córdoba as his capital, which became one of Europe's most prosperous cities. Abd al-Rahman built the Great Mosque of Córdoba, successfully defended his realm against Charlemagne's invasions and internal rebellions, and created a stable dynasty that ruled for nearly three centuries. His descendants eventually declared themselves caliphs in 929 CE, establishing the Caliphate of Córdoba and ushering in the golden age of Al-Andalus.",
        "endYear": 788,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Abd al-Rahman III",
        "startYear": 891,
        "description": "Abd al-Rahman III was one of the most distinguished rulers of Al-Andalus (Muslim Spain) and the first Umayyad caliph of Córdoba. Born into the Umayyad dynasty that had fled Damascus after the Abbasid takeover, he ascended to power in 912 CE at just 21 years old, inheriting a fragmented emirate plagued by internal rebellions and external threats. Through military prowess and diplomatic skill, he successfully reunified Al-Andalus, crushing various rebel factions and consolidating Umayyad control across the Iberian Peninsula. His greatest achievement was proclaiming himself caliph in 929 CE, establishing the Caliphate of Córdoba as a rival to both the Abbasid Caliphate in Baghdad and the Fatimid Caliphate in North Africa. Under his reign, Al-Andalus reached unprecedented heights of prosperity, cultural flourishing, and military power, with Córdoba becoming one of Europe's largest and most sophisticated cities. He expanded the Great Mosque of Córdoba, patronized arts and sciences, and crea",
        "endYear": 961,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Al Mamun",
        "startYear": 786,
        "description": "Al-Ma'mun was the seventh Abbasid caliph who ruled from 813 to 833 CE and is remembered as one of the most intellectually accomplished rulers in Islamic history. Born as Abu al-Abbas Abdallah ibn Harun al-Rashid, he came to power after a devastating civil war with his brother al-Amin that nearly tore apart the Abbasid Caliphate. Despite this turbulent beginning, Al-Ma'mun transformed his reign into a golden age of learning and scientific advancement, establishing the famous House of Wisdom (Bayt al-Hikma) in Baghdad, which became the world's premier center for translation, research, and scholarship. He actively patronized scholars, philosophers, mathematicians, and scientists from diverse backgrounds, commissioning the translation of Greek, Persian, and Indian texts into Arabic and fostering an environment where intellectual inquiry flourished. His support for the Mu'tazila theological school and his promotion of rational discourse, though controversial, demonstrated his commitment to scholarly debate and philosophical exploration. Al-Ma'mun also ordered the first accurate measurement of Earth's circumference and sponsored numerous scientific expeditions, making his caliphate a beacon of knowledge that preserved and expanded upon classical learning during Europe's Dark Ages.",
        "endYear": 833,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Suleiman ibn Selim Khan (The Magnificent)",
        "startYear": 1494,
        "description": "Suleiman the Magnificent was the tenth Ottoman Sultan who ruled from 1520 to 1566 CE and is widely regarded as the greatest ruler of the Ottoman Empire at its zenith. Born as Suleiman I, he inherited a powerful empire from his father Selim I and expanded it to unprecedented heights, conquering much of southeastern Europe, western Asia, and North Africa, making the Ottoman Empire a dominant force spanning three continents. His military campaigns extended Ottoman control deep into Europe, capturing Belgrade, Rhodes, and most famously besieging Vienna in 1529, while also securing Ottoman dominance in the Mediterranean and Red Sea regions. Beyond his military conquests, Suleiman earned the title \"Kanuni\" (the Lawgiver) among his own people for his comprehensive legal reforms that harmonized Islamic law with imperial needs, creating a sophisticated administrative system that governed his vast, multi-ethnic empire effectively. He was a great patron of the arts and architecture, commissioning magnificent mosques, palaces, and public works including the famous Süleymaniye Mosque in Istanbul, while his court became a center of Islamic culture, poetry, and learning. His reign marked the Ottoman Empire's golden age, transforming it into a major European power that would influence global politics for centuries, and his legal and administrative innovations provided a framework that sustained the empire long after his death.",
        "endYear": 1566,
        "category": "custom-personality"
    },
    {
        "type": "era",
        "name": "Median Empire",
        "startYear": -678,
        "description": "The Median Empire was an ancient Iranian power that emerged in the 7th century BCE, centered in Ecbatana (modern Hamadan, Iran). They are noted for their significant role in the downfall of the Neo-Assyrian Empire, particularly in the sacking of Nineveh in 612 BCE alongside the Babylonians. Under King Cyaxares, the Median kingdom expanded its influence across the Iranian plateau and parts of Anatolia, becoming one of the major powers in the ancient Near East alongside Babylon, Lydia, and Egypt. The empire eventually fell to Cyrus the Great of Persia, who was a vassal of the Medes, marking the rise of the Achaemenid Empire.",
        "endYear": -650,
        "category": "custom-era"
    },
    {
        "type": "era",
        "name": "Neo-Babylonian Empire",
        "startYear": -626,
        "description": "The Neo-Babylonian Empire, also known as the Chaldean Empire, was the last native Mesopotamian empire to dominate the ancient Near East. It was founded by Nabopolassar, who successfully revolted against Assyrian rule. The empire reached its peak under his son, Nebuchadnezzar II, who is famous for his military conquests, including the destruction of Jerusalem and the Babylonian Captivity of the Jews. Nebuchadnezzar II also oversaw massive building projects in Babylon, transforming it into a magnificent capital with iconic structures like the Ishtar Gate and, allegedly, the Hanging Gardens. The empire's prosperity and cultural renaissance were short-lived, as it was eventually conquered by Cyrus the Great and the Achaemenid Persian Empire in 539 BCE.",
        "endYear": -539,
        "category": "custom-era"
    },
    {
        "type": "personality",
        "name": "Nebuchadnezzar II",
        "startYear": -630,
        "description": "Nebuchadnezzar II was the second and most prominent king of the Neo-Babylonian Empire, reigning from 605 BCE. His rule marked a golden age for Babylonia, characterized by significant military expansion and monumental construction. Among his key achievements was the decisive defeat of the Egyptians at the Battle of Carchemish, which secured Babylonian control over Syria and Palestine. He is most famously known for his campaigns against the Kingdom of Judah, leading to the destruction of Jerusalem and the subsequent exile of many Jewish inhabitants to Babylon, an event central to biblical history. Beyond his military prowess, Nebuchadnezzar transformed Babylon into a magnificent capital, undertaking vast building projects that included the construction of grand palaces, temples, the iconic Ishtar Gate, and, according to tradition, the legendary Hanging Gardens, solidifying his legacy as a powerful ruler and a great builder.",
        "endYear": -562,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Cyrus the Great",
        "startYear": -600,
        "description": "Cyrus the Great was the visionary founder of the Achaemenid Empire, often hailed as the first Persian Empire, which at its zenith became the largest empire the world had yet seen. His rise to power began around 550 BCE when he successfully revolted against his grandfather, Astyages, the king of the Median Empire, unifying the Iranian tribes under his rule. A key event in his expansion was the conquest of the wealthy Kingdom of Lydia, ruled by the legendary Croesus, around 547/546 BCE. His most celebrated achievement was the peaceful conquest of Babylon in 539 BCE, which he entered without bloodshed. Cyrus is renowned for his benevolent and tolerant rule, notably allowing the Jewish exiles in Babylon to return to Jerusalem and rebuild their temple, an act recorded in the Hebrew Bible. He established a vast and efficiently administered empire, respecting local customs and religions, which fostered loyalty among his diverse subjects. His legacy as a wise and merciful ruler influenced later empires and leaders, including Alexander the Great.",
        "endYear": -530,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Alexander the Great",
        "startYear": -356,
        "description": "Alexander III of Macedon, famously known as Alexander the Great, was a king of the ancient Greek kingdom of Macedon and one of history's most successful military commanders. Ascending to the throne in 336 BCE at the age of 20, he quickly consolidated power in Greece before embarking on his ambitious conquest of the Achaemenid Persian Empire. Key events in his meteoric rise include decisive victories at the Battle of Granicus (334 BCE), the Battle of Issus (333 BCE), and the climactic Battle of Gaugamela (331 BCE), which effectively led to the overthrow of Darius III and the complete subjugation of the Persian Empire. His empire stretched from Greece to northwestern India, marking an unprecedented spread of Hellenistic culture across a vast territory. Alexander also founded numerous cities, most notably Alexandria in Egypt, which became a center of learning. His relentless pursuit of conquest led him to invade India, where he achieved victory at the Battle of the Hydaspes before his troops' mutiny forced his return. Alexander died suddenly in Babylon at the age of 32, leaving behind an immense empire that would soon fragment among his generals, but his legacy profoundly shaped the Hellenistic world.",
        "endYear": -323,
        "category": "custom-personality"
    },
    {
        "type": "war",
        "name": "Babylonian Conquest and Destruction of First Temple",
        "startYear": -586,
        "description": "Nebuchadnezzar II of Babylon conquers Jerusalem, destroys the First Temple, and exiles many Jews to Babylon",
        "endYear": -586,
        "category": "custom-war"
    },
    {
        "type": "war",
        "name": "Battle of Karbala",
        "startYear": 680,
        "description": "Husayn (AS) was surrounded and martyred by Yazid's forces at Karbala. Abdullah ibn al-Zubayr declared revolt in Mecca.",
        "endYear": 680,
        "category": "custom-war"
    },
    {
        "type": "war",
        "name": "Battle of Tours",
        "startYear": 732,
        "description": "Battle of Tours: Muslim advance into Western Europe halted by Charles Martel.",
        "endYear": 732,
        "category": "custom-war"
    },
    {
        "type": "personality",
        "name": "Darius I (Darius the Great)",
        "startYear": -550,
        "description": "Darius I was the third King of Kings of the Achaemenid Empire, reigning from 522 BCE. He inherited a vast but tumultuous empire after the death of Cambyses II and successfully quelled numerous revolts across his domain. Darius was a brilliant administrator, known for organizing the empire into satrapies, establishing a standardized currency, and improving infrastructure, including the Royal Road. He also continued the policy of religious tolerance initiated by Cyrus the Great, which was crucial for the Jewish community in Jerusalem. His reign saw the Persian Empire reach its greatest territorial extent, and he was instrumental in allowing the rebuilding of the Second Temple to proceed.",
        "endYear": -486,
        "category": "custom-personality"
    },
    {
        "type": "event",
        "name": "Sayyidinaa Dawood AS establishes a kingdom after conquering Jerusalem",
        "startYear": -1000,
        "description": "Sayyidinaa Dawood AS establishes a kingdom after conquering Jerusalem and moves the capital city from Hebron to Al-Quds (Jerusalem).This kingdom extends from the north of Jaffa to the south of Gaza",
        "category": "custom-event"
    },
    {
        "type": "event",
        "name": "Hazrat Suleman AS's assumes reign",
        "startYear": -969,
        "description": "Sayyidinaa Sulaymaan AS assumes\nthe reigns of this kingdom after his father Sayyidinaa Dawood AS. He then renovates Masjidul Aqsa as advised by his father. After the demise of Sayyidinaa Sulaiman A.S, the kingdom was divided into two parts due to a dispute amongst his descendants. The kingdom of Israel was established in the north by Rehoboam son of Sayyidinaa Sulaiman A.S and its capital was Samaria (modern day West Bank). In the south, the kingdom of Juddah was established with Jerusalem as the capital by his two descendants Yahudah and Bin-Yaamin.",
        "category": "custom-event"
    },
    {
        "type": "event",
        "name": "Isra",
        "startYear": 620,
        "description": "Prophet Muhammad Sallallahu alaihi wasallam) is taken on the miraculous journey to\nthe heavens. He is first taken to Al-Quds, this becomes the only place in the world\nwhere all the Ambiyaa AS performed Salaah collectively. This Blessed Land was the centre of all the Ambiyaa of\nthe Bani Israeel. It is also the first Qiblah of the\nMuslims. For the first 17 months in Madeenah Munawwarah, Nabi Sallallahu Alaihi Wasallam faces towards Masjidul Aqsa in prayer.",
        "category": "custom-event"
    },
    {
        "type": "personality",
        "name": "Sayyidina Tameem ibn Aws al-Dari (R.A.)",
        "startYear": 600,
        "description": "Controversial Birth Year\n\nSayyidina Tameem al-Dari was originally a Christian merchant from Palestine who later converted to Islam. He is highly regarded in Islamic tradition, particularly for his narration of a significant hadith (prophetic tradition) concerning his encounter with the Dajjal (Antichrist) during one of his journeys, earning him the title of \"the intrepid traveler.\" After his conversion, he settled in Medina and became an advisor to the Prophet Muhammad (peace be upon him), offering advice on matters of public worship, including the introduction of oil lamps in mosques. He is also traditionally considered the first narrator of Islamic religious stories. He later moved back to his native Palestine, where he passed away in 661 CE and is traditionally buried in Bayt Jibrin.",
        "endYear": 661,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Ibn Battutah",
        "startYear": 1304,
        "description": "Ibn Battuta was a renowned Moroccan Muslim scholar and explorer, born on February 24, 1304 CE in Tangier, Morocco. He passed away around 1368 or 1369 CE in Morocco.\n\nDriven by an insatiable wanderlust and a desire to perform the Hajj (pilgrimage to Mecca), Ibn Battuta embarked on a series of extensive journeys that spanned nearly three decades, covering an astonishing estimated distance of 117,000 km (73,000 miles)—far surpassing his contemporary, Marco Polo. His travels took him across most of the Islamic world, including North Africa, the Middle East, Persia, East Africa (as far south as Kilwa in modern Tanzania), Anatolia, the lands of the Golden Horde, Central Asia, India (where he served as a judge for several years), the Maldives, Southeast Asia, and even China. Near the end of his life, at the insistence of the Moroccan Sultan, he dictated an account of his adventures, known as \"The Rihla\" (literally \"The Journey\"), which offers invaluable insights into the social, political, and cultural life of the medieval world. His meticulous observations and detailed descriptions make his work a crucial historical source, providing a unique perspective on the vast and diverse Muslim lands of his time and beyond",
        "endYear": 1368,
        "category": "custom-personality"
    },
    {
        "type": "event",
        "name": "Sultan Salim the Ottoman Khalifah, takes over Jerusalem",
        "startYear": 1516,
        "description": "Sultan Selim I, also known as Selim the Grim or Selim the Resolute, of the Ottoman Empire, took over Jerusalem in 1516 CE. This occurred during his extensive conquest of the Mamluk Sultanate of Egypt, which included the Levant region. The Ottoman forces, under Selim I, defeated the Mamluks at the Battle of Marj Dabiq in October 1516, leading to the swift incorporation of Syria and Palestine, including Jerusalem, into the Ottoman Empire. Jerusalem remained under Ottoman rule for over 400 years, until its capture by British forces in 1917 during World War I",
        "category": "custom-event"
    },
    {
        "type": "event",
        "name": "Capture of Jerusalem by Britain",
        "startYear": 1917,
        "description": "The British capture of Jerusalem in 1917 during World War I was a significant event in the Sinai and Palestine Campaign. Under the command of General Edmund Allenby, the British Egyptian Expeditionary Force advanced through Ottoman Palestine. After a series of battles, including the Third Battle of Gaza, the British forces pushed towards Jerusalem. The city, strategically important and a major symbolic prize, was defended by Ottoman and German troops. However, facing overwhelming British pressure and a desire to avoid destructive urban warfare, the Ottoman forces largely withdrew, and the city officially surrendered to the British on December 9, 1917. General Allenby famously entered Jerusalem on foot two days later, emphasizing the religious significance of the city and aiming to show respect for its holy sites. This capture marked the end of over four centuries of Ottoman rule in Jerusalem",
        "category": "custom-event"
    },
    {
        "type": "personality",
        "name": "Abu al-Abbas al-Saffah",
        "startYear": 721,
        "description": "Abu al-Abbas al-Saffah, whose reign name means \"the Blood-Shedder,\" was a pivotal figure who fundamentally transformed the Islamic world through his establishment of the Abbasid Caliphate in 750 CE. Born around 722 CE and dying in 754 CE in Anbar, Iraq, he reigned as the first Abbasid caliph from 749-754, founding a dynasty that would rule over the eastern Islamic world for approximately the next 500 years. His most significant achievement was leading the successful Abbasid Revolution that overthrew the Umayyad Caliphate, culminating in the decisive Battle of the Great Zab River in February 750 CE, where his forces defeated the last Umayyad caliph Marwan II, effectively ending 89 years of Umayyad rule RuthjohnstonFandom. Al-Saffah revolutionized the structure of Islamic governance by implementing policies that equalized status among believers, breaking the Arab supremacist policies of the Umayyads by appointing Muslims from Khurasan, Iran, and Iraq to command positions previously reserved only for Arabs, and extending opportunities to Jews, Christians, and Persians in his administration al-Mansur - Wikipedia. He made the strategic decision to establish Kufa as the new capital of the caliphate, ending Damascus's dominance in the Islamic political world and shifting the center of power to Iraq, which would remain the seat of Abbasid power for centuries RuthjohnstonFandom. His reign also marked significant military achievements, including sending forces to Central Asia where they achieved victory over the Chinese Tang Dynasty at the Battle of Talas in 751 CE, after which the first Muslim paper mill was established in Samarkand, facilitating the spread of paper technology westward FandomWikipedia. Despite his brutal suppression of the Umayyad family that earned him his fearsome epithet, al-Saffah established a firm legal and dynastic foundation for the Abbasids that would endure for over five centuries, creating one of the longest-lasting and most influential caliphates in Islamic history",
        "endYear": 754,
        "category": "custom-personality"
    },
    {
        "type": "event",
        "name": "Rise of Adad-nirari II",
        "startYear": -911,
        "description": "Adad-nirari II ascends to the Assyrian throne, marking the beginning of the Neo-Assyrian Empire's resurgence. His military reforms and expansion campaigns restored Assyrian power after a period of decline, establishing the foundation for what would become the largest empire the world had yet seen. His conquests extended Assyrian control across northern Mesopotamia and initiated a period of unprecedented military innovation.",
        "category": "custom-event"
    },
    {
        "type": "event",
        "name": "Founding of Rome",
        "startYear": -753,
        "description": "According to Roman tradition, Romulus establishes the city of Rome on the Palatine Hill after killing his twin brother Remus. This legendary founding marks the beginning of Roman civilization, which would grow from a small city-state to dominate the Mediterranean world. Archaeological evidence suggests continuous settlement in the area from this period, with the development of the famous seven hills and early Roman institutions",
        "category": "custom-event"
    },
    {
        "type": "event",
        "name": "Assyrian Invasion of Egypt",
        "startYear": -678,
        "description": "Esarhaddon of Assyria launches a major military campaign against Egypt, successfully capturing Memphis and temporarily bringing the land of the pharaohs under Assyrian control. This marked the height of Assyrian territorial expansion, making it the first empire to control territories spanning from Iran to Egypt. The conquest demonstrated advanced Assyrian siege warfare and logistics capabilities.",
        "category": "custom-event"
    },
    {
        "type": "event",
        "name": "Peak of Ashurbanipal's Reign",
        "startYear": -650,
        "description": "Under Ashurbanipal, the Assyrian Empire reaches its greatest territorial extent and cultural achievement. His famous library at Nineveh becomes the world's first organized library, preserving thousands of cuneiform tablets including the Epic of Gilgamesh. Despite military successes, internal pressures and constant rebellions begin to strain the empire's resources, foreshadowing its eventual collapse",
        "category": "custom-event"
    },
    {
        "type": "event",
        "name": "Foundation of Cyrene",
        "startYear": -630,
        "description": "Greek colonists from the island of Thera establish Cyrene in North Africa (modern-day Libya), creating one of the most prosperous Greek colonies in the ancient world. The city becomes famous for its production of silphium, a valuable medicinal plant, and serves as a crucial link between Greek civilization and the African continent. This colonization effort exemplifies the Greek expansion across the Mediterranean.",
        "category": "custom-event"
    },
    {
        "type": "event",
        "name": "Rise of Nabopolassar",
        "startYear": -626,
        "description": "Nabopolassar becomes king of Babylon, establishing the Neo-Babylonian Empire and beginning the final phase of Assyrian decline. His alliance with the Medes would prove crucial in overthrowing Assyrian dominance. Under his rule, Babylon begins its transformation into the magnificent city described in ancient sources, setting the stage for the reign of his famous son, Nebuchadnezzar II.",
        "category": "custom-event"
    },
    {
        "type": "event",
        "name": "Battle of Megiddo & Death of Josiah",
        "startYear": -609,
        "description": "King Josiah of Judah dies at the Battle of Megiddo while attempting to intercept Pharaoh Necho II of Egypt, who was marching north to assist the declining Assyrian Empire against the rising Babylonian-Median alliance. This event marks a crucial turning point in Near Eastern politics and the end of Judah's brief period of independence and religious reform under Josiah's rule.",
        "category": "custom-event"
    },
    {
        "type": "event",
        "name": "Greek Philosophical Renaissance",
        "startYear": -600,
        "description": "Around this time, the Greek world experiences a philosophical and intellectual awakening, with early pre-Socratic philosophers like Thales beginning to develop rational explanations for natural phenomena. This period also sees the intensification of Greek colonization efforts across the Mediterranean and Black Sea regions, spreading Hellenic culture and establishing trade networks that would define the ancient economy.",
        "category": "custom-event"
    },
    {
        "type": "personality",
        "name": "Adad-nirari II",
        "startYear": -950,
        "description": "King of Assyria from 911-891 BCE who initiated the Neo-Assyrian Empire's resurgence after the Assyrian Dark Age. Born into royalty during Assyrian decline, he implemented crucial military reforms, reconquered territories lost to Aramean tribes, and established efficient administrative systems. His aggressive campaigns restored Assyrian dominance in northern Mesopotamia, introduced advanced siege warfare and iron weapons, and laid foundations for three centuries of Assyrian hegemony in the Near East.",
        "endYear": -891,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Ashurbanipal",
        "startYear": -685,
        "description": "Last great Assyrian king (668-627 BCE) who presided over the empire's territorial peak and initial decline. Exceptionally educated and literate in cuneiform, he created the world's first organized library at Nineveh with 30,000 tablets including the Epic of Gilgamesh. Despite military successes against Egypt, Elam, and rebellions, constant warfare drained imperial resources. His brutal suppression of his brother's Babylonian revolt and other uprisings created resentment that contributed to Assyria's rapid post-death collapse.",
        "endYear": -627,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Nabopolassar",
        "startYear": -658,
        "description": "Founder of the Neo-Babylonian Empire (626-605 BCE) who orchestrated Assyria's destruction. Originally a Chaldean tribal leader, he successfully rebelled against Assyrian rule and allied with Media to capture Nineveh in 612 BCE. His achievements include ending Assyrian hegemony, establishing Babylon as Mesopotamia's dominant power, initiating massive building projects that transformed Babylon into a magnificent city, and creating administrative foundations that enabled his son Nebuchadnezzar II's later conquests",
        "endYear": -605,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Josiah",
        "startYear": -649,
        "description": "Sixteenth king of Judah (640-609 BCE) remembered as the most reformist ruler in Jewish history. Ascending at age eight after his father's assassination, he implemented sweeping religious reforms following discovery of the \"Book of the Law\" in 622 BCE. Major achievements include destroying pagan shrines, centralizing worship in Jerusalem, celebrating Passover on unprecedented scale, and extending reforms into former Israel. His death at Megiddo while intercepting Pharaoh Necho II ended Judah's last period of independence.",
        "endYear": -609,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Romulus",
        "startYear": -771,
        "description": "Legendary first king and founder of Rome (753 BCE), though historical existence is debated. According to tradition, twin son of Mars raised by wolves, he killed brother Remus in dispute over city location. Credited with establishing Roman Senate, military legions, religious practices, legal customs, and governmental structure. Organized population into tribes, expanded territory through conquest of Latin/Sabine communities, and created foundations for Roman civilization. Legend claims he became god Quirinus after being taken to heaven during thunderstorm.",
        "endYear": -717,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Remus",
        "startYear": -771,
        "description": "Legendary twin brother of Romulus in Roman foundation mythology. Abandoned as infant and raised by she-wolf alongside Romulus before discovery by shepherd Faustulus. According to tradition, he disagreed with Romulus over Rome's location, favoring Aventine Hill over Palatine Hill. During the founding ceremony, he mockingly jumped over Romulus's city walls, leading to his death at his brother's hands. His sacrifice became symbolic of Rome's destiny and the price of greatness, representing the tragic cost of ambition in Roman cultural memory.",
        "endYear": -753,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Pharaoh Necho II",
        "startYear": -650,
        "description": "Egyptian pharaoh (610-595 BCE) who attempted to restore Egyptian power during Near Eastern upheaval. Major achievements include commissioning first circumnavigation of Africa by Phoenician sailors, beginning construction of canal connecting Nile to Red Sea (predecessor to Suez Canal), and intervening in Assyrian-Babylonian conflict. Defeated and killed King Josiah at Megiddo while marching to assist Assyria, but was ultimately defeated by Nebuchadnezzar II at Carchemish (605 BCE), ending Egyptian ambitions in Levant and establishing Babylonian regional dominance.",
        "endYear": -595,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Maulana Abul Kalam Azad",
        "startYear": 1888,
        "description": "Maulana Abul Kalam Azad was born on November 11, 1888, in Mecca, then part of the Ottoman Empire and became one of India's most distinguished freedom fighters, Islamic theologian, educationist, and political leader. He adopted the name Azad (\"free\"), to which the honorific maulana (a title meaning \"master\" applied to Islamic scholars) was commonly prefixed Abul Kalam Azad. A brilliant intellectual who was home-schooled in traditional Islamic education, he mastered multiple languages including Arabic, Persian, Urdu, and English. At age eleven, he started writing and began publishing the monthly magazine \"Nairang-e-Alam\" in 1899 Cultural IndiaClearIAS. In 1912, he began publishing the influential weekly Urdu newspaper Al-Hilal, which became highly popular for its anti-British stance and was subsequently banned by British authorities. As a prominent leader of the Indian National Congress, he served as Congress President in 1923 and again in 1940-46. He was a fierce opponent of the partition of India and tirelessly advocated for a single India that would embrace both Hindus and Muslims. After independence, he served as India's first Education Minister from 1947 to 1958 in Nehru's Cabinet Maulana Abul Kalam Azad ClearIAS and the Indian Council for Cultural Relations (ICCR) Maulana Abul Kalam Azad - Constitution of India. He was posthumously awarded the Bharat Ratna, India's highest civilian honor, in 1992 Constitution of IndiaVEDANTU, and his birthday, November 11, is celebrated as National Education Day in India",
        "endYear": 1958,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Reza Shah Pahlavi",
        "startYear": 1878,
        "description": "Reza Shah Pahlavi was born on March 15, 1878, in Alasht, Mazandaran province, Iran, and became the founder of the Pahlavi dynasty and Shah of Iran from 1925 to 1941. Born into a military family as the son of Major Abbas Ali Khan, he was orphaned at an early age and raised by his maternal uncle, an officer in the Persian Cossack Brigade. Despite lacking formal education, he possessed remarkable intelligence and leadership qualities. At age 15, he joined the Persian Cossack Brigade under Russian instructors and rose through the ranks to become brigadier general by 1918. Following World War I, when Iran was in chaos under the weak Qajar dynasty, Reza Khan led a coup in 1921 that brought him to power as minister of war. In 1925, the Majlis deposed the absent Ahmad Shah Qajar and elected Reza Khan as the new shah, establishing the Pahlavi dynasty. As ruler, he embarked on an ambitious modernization program that transformed Iran from a fragmented, backward nation into a centralized modern state. His achievements included building the Trans-Iranian Railway, establishing the first national school system, creating Iran's first university, implementing civil registration systems, modernizing the military, renegotiating favorable oil agreements with Britain, and promoting women's rights including the controversial unveiling decree of 1936. He changed the country's name from Persia to Iran and adopted Western-style dress codes. Significantly, the Pahlavi dynasty cultivated a symbolic connection to Cyrus the Great, the ancient Persian emperor, as part of their legitimization strategy and promotion of Iranian nationalism, even though Cyrus's tomb at Pasargadae had been identified by British scholars decades earlier in 1812. This connection to ancient Persian heritage became central to Pahlavi ideology, with his son Mohammad Reza Shah later creating a full \"state cult around Cyrus the Great\" and organizing the famous 1971 celebration of \"2,500 years of Persian monarchy\" at Persepolis and Cyrus's tomb. However, his increasingly close ties with Nazi Germany during World War II alarmed Britain and the Soviet Union, who invaded Iran in August 1941. Faced with foreign occupation, Reza Shah abdicated in favor of his son Mohammad Reza Pahlavi on September 16, 1941, to preserve the dynasty. He went into exile, first in Mauritius and then South Africa, where he died in Johannesburg on July 26, 1944, at age 66. His body was later returned to Iran and buried in a mausoleum in Ray, near Tehran, though his legacy as the architect of modern Iran remains significant despite the controversies surrounding his authoritarian rule and his strategic appropriation of ancient Persian symbols to legitimize his new dynasty.",
        "endYear": 1944,
        "category": "custom-personality"
    },
    {
        "type": "era",
        "name": "Kingdom of Aksum",
        "startYear": 50,
        "description": "(Start year is approximated) The Kingdom of Aksum was founded in the first century CE, flourished from the 3rd to 6th century CE, and collapsed under uncertain circumstances around 960 CE. Aksum was established in the early 1st century AD after the rulers of the early pre-Aksumite polity shifted their capital from the site of Beta Giyorgis just north of Aksum, where they had been settled since the 4th century BC. The kingdom emerged from the earlier D'MT civilization and was strategically located in what is now northern Ethiopia and Eritrea, spanning present-day Djibouti and Sudan.\nThe territory Aksum once controlled is today occupied by the states of Ethiopia, Eritrea, Djibouti, Somalia, and Somaliland. The kingdom was considered one of the four greatest powers of the third century by the Persian prophet Mani, alongside Persia, Rome, and China. Prospering thanks to agriculture, cattle herding, and control over trade routes which saw gold and ivory exchanged for foreign luxury goods, the kingdom achieved several firsts including being the first sub-Saharan African state to mint its own coinage and around 350 CE, the first to officially adopt Christianity. The kingdom began to decline in the early 6th century, eventually ceasing its production of coins in the early 7th century, with the capital being abandoned and the population forced to move inland for protection.",
        "endYear": 960,
        "category": "custom-era"
    },
    {
        "type": "personality",
        "name": "Najashi As-hamah ibn Abjar",
        "startYear": 570,
        "description": "(Birth Year approximated) The Najashi reigned for almost 17 years from 614 to 630 CE. His name was Ashama ibn Abjar al-Najashi, where \"Negus\" was the title of the ruler equivalent to titles like \"Caesar\" or \"Khosrow,\" while Ashama was his actual name. Ashama is a curious name equivalent to the Arabic name Atiyah, meaning \"a gift,\" and truly, he was considered a gift. Arabic sources state the king's name was \"Ella-Seham,\" occasionally written as variant names \"Ashama,\" \"Asmaha,\" \"Sahama\" and \"Asbeha.\"\nThe king's early life was marked by tragedy and resilience. Najashi's father was the king and Ashama was his only son. However, Najashi's paternal uncle had 12 sons, and some Abyssinians plotted to assassinate Najashi's father so that the uncle, with his 12 sons, could take over the throne. They attacked the king and killed him, and they made his brother king. So then Najashi entered upon his uncle's care as a young boy, growing up among his 12 male cousins, under the care of the uncle who had plotted and murdered his father. As Ashama grew up, he began to demonstrate clear superior intellect, wisdom, strength, and talents compared to his 12 cousins, which eventually led to his uncle recognizing his rightful claim to the throne.\nHe was not just a ruler; he was a devout and learned Christian. His empire was known as an island of Christianity in a sea of polytheism. He was a scholar of Christianity, known for his righteousness and strong character. He died in 630. Some Muslim sources indicate that Muhammad prayed an absentee funeral prayer in al-Baqi Cemetery, Medina which is performed for the departed soul of a Muslim, suggesting his conversion to Islam before his death.",
        "endYear": 630,
        "category": "custom-personality"
    },
    {
        "type": "event",
        "name": "The First Hijra to Abyssinia",
        "startYear": 615,
        "description": "Based on my research, I can provide you with detailed information about the Kingdom of Aksum, the Najashi, and the First Hijra. Here are the comprehensive accounts you requested:\n\n## Kingdom of Aksum Timeline and Description\n\nThe Kingdom of Aksum was founded in the first century CE, flourished from the 3rd to 6th century CE, and collapsed under uncertain circumstances around 960 CE. Aksum was established in the early 1st century AD after the rulers of the early pre-Aksumite polity shifted their capital from the site of Beta Giyorgis just north of Aksum, where they had been settled since the 4th century BC. The kingdom emerged from the earlier D'MT civilization and was strategically located in what is now northern Ethiopia and Eritrea, spanning present-day Djibouti and Sudan.\n\nThe territory Aksum once controlled is today occupied by the states of Ethiopia, Eritrea, Djibouti, Somalia, and Somaliland. The kingdom was considered one of the four greatest powers of the third century by the Persian prophet Mani, alongside Persia, Rome, and China. Prospering thanks to agriculture, cattle herding, and control over trade routes which saw gold and ivory exchanged for foreign luxury goods, the kingdom achieved several firsts including being the first sub-Saharan African state to mint its own coinage and around 350 CE, the first to officially adopt Christianity. The kingdom began to decline in the early 6th century, eventually ceasing its production of coins in the early 7th century, with the capital being abandoned and the population forced to move inland for protection.\n\n## Life of Najashi As-hamah ibn Abjar\n\nThe Najashi reigned for almost 17 years from 614 to 630 CE. His name was Ashama ibn Abjar al-Najashi, where \"Negus\" was the title of the ruler equivalent to titles like \"Caesar\" or \"Khosrow,\" while Ashama was his actual name. Ashama is a curious name equivalent to the Arabic name Atiyah, meaning \"a gift,\" and truly, he was considered a gift. Arabic sources state the king's name was \"Ella-Seham,\" occasionally written as variant names \"Ashama,\" \"Asmaha,\" \"Sahama\" and \"Asbeha.\"\n\nThe king's early life was marked by tragedy and resilience. Najashi's father was the king and Ashama was his only son. However, Najashi's paternal uncle had 12 sons, and some Abyssinians plotted to assassinate Najashi's father so that the uncle, with his 12 sons, could take over the throne. They attacked the king and killed him, and they made his brother king. So then Najashi entered upon his uncle's care as a young boy, growing up among his 12 male cousins, under the care of the uncle who had plotted and murdered his father. As Ashama grew up, he began to demonstrate clear superior intellect, wisdom, strength, and talents compared to his 12 cousins, which eventually led to his uncle recognizing his rightful claim to the throne.\n\nHe was not just a ruler; he was a devout and learned Christian. His empire was known as an island of Christianity in a sea of polytheism. He was a scholar of Christianity, known for his righteousness and strong character. He died in 630. Some Muslim sources indicate that Muhammad prayed an absentee funeral prayer in al-Baqi Cemetery, Medina which is performed for the departed soul of a Muslim, suggesting his conversion to Islam before his death.\n\n## The First Hijra: Detailed Account\n\nThe migration to Abyssinia, also known as the First Hijra, was an episode in the early history of Islam, where the first followers of the Islamic prophet Muhammad migrated from Arabia due to their persecution by the Quraysh, the ruling Arab tribal confederation of Mecca. They sought and were granted refuge in the Kingdom of Aksum in 9 BH (613 CE) or 7 BH (615 CE). In 615 C.E., in the month of Rajab, during the fifth year of prophetic mission, fifteen people (11 men, 4 women) left Makkah for Abyssinia.\n\nThe persecution that led to this migration was severe and escalating. After three years of the first Revelation, open preaching of Islam started and the persecution of Muslims also started which increased day by day. In the first stage, the persecution was only verbal but gradually it converted to physical persecution. When the violence of the polytheists against the Muslims didn't show any sign of de-escalating, Prophet Muhammad suggested to them to leave Makkah and to seek sanctuary in Abyssinia (Ethiopia), which was then ruled by a Christian king named Ashama ibn Abjar, well known for being a just and God-fearing man.\n\nEach migrant paid half Dinar for crossing the Red Sea from the port of Shu'aybah, which is located at modern day Mocha. Thus, they were able to cross the Red Sea easily and entered Abyssinia before the Makkans could catch them. This group included Muhammad's daughter Ruqayyah and his son-in-law Uthman ibn Affan, who would later become the third caliph of the Rashidun Caliphate after Muhammad's death. Prior to the exile, Muhammad chose Uthman ibn Mazʽun, one of his most important companions, as the leader of this group.\n\nAfter a year, the exiles heard rumours that the Quraysh had converted to Islam, which prompted them to return to Mecca. Confronted with the opposite reality, they set out for the Aksumite kingdom again in 6 BH (616 CE) or 7 BH (615 CE) according to other sources, this time accompanied by other newly-founded Muslims, with the migrant group comprising 83 men and 18 women in total. The Quraysh, alarmed by this migration, sent an embassy led by Amr ibn al-As to the Najashi, demanding the return of the Muslim refugees and bringing rich gifts to persuade the king.\n\nWhen the king addressed Jaʽfar, he replied that they held Jesus to be \"the servant of Allah, His prophet, His spirit and His word, which he cast unto the pure virgin Mary\". Muslim accounts state that upon hearing these words, the Negus declared that Jesus was indeed no more than what he had said; he turned to the Muslims and told them: \"go, for you are safe in my country\". He then returned the gifts to the envoys and dismissed them. Many of the exiles in Aksum returned to Mecca in 622 and made the hijra to Medina with Muhammad, while a second wave went to Medina in 628.\n\nThis migration established an important precedent in Islamic history, demonstrating the principle of seeking refuge under just rulers when facing religious persecution, and highlighting the early interfaith dialogue between Islam and Christianity in the person of the righteous Najashi.",
        "category": "custom-event"
    },
    {
        "type": "war",
        "name": "Indo Pak War",
        "startYear": 1965,
        "description": "What a war!",
        "endYear": 1965,
        "category": "custom-war"
    },
    {
        "type": "personality",
        "name": "Muhyiddin Ibn Arabi",
        "startYear": 1165,
        "description": "Born in 1165 in Murcia, Al-Andalus, Muhyiddin Ibn Arabi was a prodigious mystic and philosopher whose spiritual journey took him from the intellectual centers of Spain to the heart of the Middle East, eventually settling in Damascus where he passed away in 1240. Known as Al-Shaykh Al-Akbar (The Greatest Master), he bridged the gap between rational philosophy and mystical experience, a capacity he demonstrated as a youth during a famous encounter with the philosopher Ibn Rushd. His literary output was immense, comprising hundreds of works that detailed his visions and metaphysical system, but he is best defined by two masterpieces: the encyclopedic Al-Futuhat al-Makkiyya (The Meccan Revelations), which covers the breadth of Sufi knowledge, and the Fusus al-Hikam (The Bezels of Wisdom), a dense distillation of his teachings on the spiritual reality of the prophets.\n\nIbn Arabi’s influence on Islamic thought is immeasurable, primarily due to his articulation of Wahdat al-Wujud (The Unity of Being), a doctrine proposing that all reality is a reflection of the single, divine Truth. This concept, along with his theory of Al-Insan al-Kamil (The Perfect Human), provided a sophisticated philosophical vocabulary for Sufism that heavily influenced later poets like Rumi and Jami, effectively standardizing the language of Islamic mysticism. While his bold assertions often drew the ire of orthodox jurists who viewed his monistic ideas as heretical, his work remains the central pillar of Sufi metaphysics, continuing to challenge and inspire scholars and spiritual seekers across the world today.",
        "endYear": 1240,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Taqi al-Din Ahmad ibn Taymiyyah",
        "startYear": 1263,
        "description": "Born in 1263 in Harran (modern-day Turkey), Taqi al-Din Ahmad ibn Taymiyyah was a formidable Hanbali scholar whose life was defined by intellectual brilliance and constant conflict with the religious and political establishment. Fleeing the Mongol invasion as a child, he settled in Damascus, where he mastered Islamic jurisprudence and theology, eventually producing a massive body of work estimated at hundreds of volumes. His most famous contributions include Majmu' al-Fatawa (Compilation of Fatwas), Al-Aqidah Al-Wasitiyyah, and Minhaj as-Sunnah, a vast critique of Shia Islam. He spent much of his life imprisoned in Cairo, Alexandria, and Damascus for his controversial rulings against practices he deemed heretical innovations (bid'ah), such as saint veneration and Greek-influenced philosophy. He died in 1328 while incarcerated in the Citadel of Damascus, denied his pen and paper, yet his funeral was attended by hundreds of thousands.\n\nIbn Taymiyyah's influence is arguably more potent today than it was during his lifetime, as he is the primary intellectual forefather of the modern Salafi and Wahhabi movements. His central mission was to \"purify\" Islam by rejecting later theological developments and returning strictly to the literal texts of the Quran and Sunnah as understood by the first three generations of Muslims (the Salaf). His controversial \"Mardin Fatwa,\" which allowed for jihad against rulers who claimed to be Muslim but did not apply Sharia (originally directed at the Mongols), has famously been cited by modern militant groups to justify insurrection. However, beyond political radicalism, his rigorous defense of Tawhid (monotheism) and his critiques of pantheistic Sufism remain central to the curriculum of conservative Sunni theology worldwide, cementing his status as a polarizing but inescapable figure in Islamic history.\n\nIbn Taymiyyah died on September 26, 1328 (20 Dhu al-Qa'dah 728 AH) while imprisoned in the Citadel of Damascus in Syria.\n\nHe passed away after being incarcerated for his controversial religious rulings, specifically his condemnation of the practice of visiting saints' graves. In his final months, he was deprived of his writing materials, a punishment he found more severe than the imprisonment itself. Despite his status as a prisoner, his funeral was attended by a massive crowd—estimated at over 200,000 people—reflecting the deep respect he commanded among the public",
        "endYear": 1328,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Gautama Buddha",
        "startYear": -563,
        "description": "Founded Buddhism; taught the \"Middle Way,\" non-violence (Ahimsa), and the path to enlightenment (Nirvana). challenged the rigid caste system of his time.\n\nHis teachings challenged established Vedic traditions, initially causing social friction in ancient India.",
        "endYear": -483,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Confucius",
        "startYear": -551,
        "description": "Established Confucianism, emphasizing morality, family loyalty (filial piety), and social harmony. Defined the Chinese ethical system for millennia.\n\n\nHis rigid focus on hierarchy and tradition arguably slowed social mobility and innovation in later centuries.",
        "endYear": -479,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Socrates",
        "startYear": -470,
        "description": "Father of Western philosophy; developed the \"Socratic Method\" of questioning to stimulate critical thinking and expose contradictions.\n\n\nAccused of \"corrupting the youth\" and mocking traditional gods, leading to his trial and execution.",
        "endYear": -399,
        "category": "custom-personality"
    },
    {
        "type": "personality",
        "name": "Ashoka the Great",
        "startYear": -304,
        "description": "Unified most of the Indian subcontinent; famously converted to non-violence after the Kalinga War; spread Buddhism across Asia; promoted animal welfare.\n\n\nHis early reign was marked by extreme brutality and a war of conquest in Kalinga that killed over 100,000 people.",
        "endYear": -232,
        "category": "custom-personality"
    }
];

        // Global variables for timeline range
        const minYear = -1000; // Changed from -100 to -1000
        const maxYear = 2025;
        const totalRange = maxYear - minYear;

        let data = []; // This will hold rawData + generated events
        let currentYear = 800; // Initial year
        let allEventYears = []; // This will store years of all items (eras, events, personalities, wars) for dots

        // Cache DOM elements
        const elements = {};

        // Generate birth and death events from personalities
        function generatePersonalityEvents(personalities) {
            const events = [];
            personalities.forEach(person => {
                // Create birth event
                events.push({
                    type: 'event',
                    category: 'birth',
                    name: `${person.name} Birth`,
                    startYear: person.startYear,
                    description: `Birth of ${person.name}.`,
                    isGenerated: true // Mark as generated
                });

                // Create death event if person has died
                if (person.endYear && person.endYear !== 9999) {
                    events.push({
                        type: 'event',
                        category: 'death',
                        name: `${person.name} Death`,
                        startYear: person.endYear,
                        description: `Death of ${person.name}.`,
                    isGenerated: true // Mark as generated
                    });
                }
            });
            return events;
        }

        function initializeData() {
            // Filter out previously generated events before regenerating
            const nonGeneratedRawData = rawData.filter(item => !item.isGenerated);
            const personalities = nonGeneratedRawData.filter(item => item.type === 'personality');
            const generatedEvents = generatePersonalityEvents(personalities);
            data = [...nonGeneratedRawData, ...generatedEvents];
        }

        function cacheElements() {
            elements.yearSlider = document.getElementById('yearSlider');
            elements.yearDisplay = document.getElementById('yearDisplay');
            elements.erasContent = document.getElementById('erasContent');
            elements.eventsContent = document.getElementById('eventsContent');
            elements.warsContent = document.getElementById('warsContent'); // NEW: Cache wars content
            elements.personalitiesContent = document.getElementById('personalitiesContent');
            elements.erasCount = document.getElementById('erasCount');
            elements.eventsCount = document.getElementById('eventsCount');
            elements.warsCount = document.getElementById('warsCount'); // NEW: Cache wars count
            elements.personalitiesCount = document.getElementById('personalitiesCount');
            elements.erasSubtitle = document.getElementById('erasSubtitle');
            elements.eventsSubtitle = document.getElementById('eventsSubtitle');
            elements.warsSubtitle = document.getElementById('warsSubtitle'); // NEW: Cache wars subtitle
            elements.personalitiesSubtitle = document.getElementById('personalitiesSubtitle');
            elements.eventDotsContainer = document.getElementById('eventDotsContainer');
            elements.separatorContainer = document.getElementById('separatorContainer');
            elements.prevArrow = document.getElementById('prevArrow');
            elements.nextArrow = document.getElementById('nextArrow');
            elements.yearSearchInput = document.getElementById('yearSearchInput');
            elements.searchButton = document.getElementById('searchButton');
            elements.searchResultsModal = document.getElementById('searchResultsModal');
            elements.closeSearchResultsModal = document.getElementById('closeSearchResultsModal');
            elements.searchResultsContent = document.getElementById('searchResultsContent');
            elements.addDataModal = document.getElementById('addDataModal');
            elements.addDataModalTitle = document.getElementById('addDataModalTitle');
            elements.addDataForm = document.getElementById('addDataForm');
            elements.addDataSection = document.getElementById('addDataSection');
            elements.addDataName = document.getElementById('addDataName');
            elements.addDataStart = document.getElementById('addDataStart');
            elements.addDataStartEra = document.getElementById('addDataStartEra'); // NEW: Start Year Era
            elements.addDataEnd = document.getElementById('addDataEnd');
            elements.addDataEndEra = document.getElementById('addDataEndEra');     // NEW: End Year Era
            elements.addDataDescription = document.getElementById('addDataDescription');
            elements.addDataSubmitButton = document.getElementById('addDataSubmitButton');
            elements.addDataIndex = document.getElementById('addDataIndex');
            elements.openAddDataModal = document.getElementById('openAddDataModal');
            elements.closeAddDataModal = document.getElementById('closeAddDataModal');
            elements.saveHtmlButton = document.getElementById('saveHtmlButton');
            elements.goToYearInput = document.getElementById('goToYearInput'); // New element
            elements.goToYearEra = document.getElementById('goToYearEra');     // New element
            elements.goToYearButton = document.getElementById('goToYearButton'); // New element

            // New elements for full list modal
            elements.fullListModal = document.getElementById('fullListModal');
            elements.closeFullListModal = document.getElementById('closeFullListModal');
            elements.fullListModalTitle = document.getElementById('fullListModalTitle');
            elements.fullListContent = document.getElementById('fullListContent');

            // Column headers for click events
            elements.erasHeader = document.getElementById('erasHeader');
            elements.eventsHeader = document.getElementById('eventsHeader');
            elements.warsHeader = document.getElementById('warsHeader');
            elements.personalitiesHeader = document.getElementById('personalitiesHeader');
        }

        function calculateEventYears() {
            const yearSet = new Set();
            // Include start/end years of all data types for dots
            rawData.forEach(item => {
                yearSet.add(item.startYear);
                if (item.endYear && item.endYear !== 9999) {
                    yearSet.add(item.endYear);
                }
            });
            allEventYears = Array.from(yearSet).sort((a, b) => a - b);
        }

        function updateArrowStates() {
            const nextEventYear = allEventYears.find(year => year > currentYear);
            const prevEventYear = allEventYears.slice().reverse().find(year => year < currentYear);

            // Update previous arrow
            if (prevEventYear === undefined) {
                elements.prevArrow.classList.add('disabled');
            } else {
                elements.prevArrow.classList.remove('disabled');
            }

            // Update next arrow
            if (nextEventYear === undefined) {
                elements.nextArrow.classList.add('disabled');
            } else {
                elements.nextArrow.classList.remove('disabled');
            }
        }

        function navigateToNextEvent() {
            const nextEventYear = allEventYears.find(year => year > currentYear);
            if (nextEventYear !== undefined) {
                jumpToYear(nextEventYear);
            } else {
                // If no later event, jump to the very last event
                const lastEvent = allEventYears[allEventYears.length - 1];
                if (lastEvent !== undefined && currentYear !== lastEvent) {
                    jumpToYear(lastEvent);
                }
            }
        }

        function navigateToPreviousEvent() {
            const previousEventYear = allEventYears.slice().reverse().find(year => year < currentYear);
            if (previousEventYear !== undefined) {
                jumpToYear(previousEventYear);
            } else {
                // If no earlier event, jump to the very first event
                const firstEvent = allEventYears[0];
                if (firstEvent !== undefined && currentYear !== firstEvent) {
                    jumpToYear(firstEvent);
                }
            }
        }

        function initializeArrowNavigation() {
            elements.prevArrow.addEventListener('click', navigateToPreviousEvent);
            elements.nextArrow.addEventListener('click', navigateToNextEvent);
        }

        function createTimelineMarkers() {
            elements.eventDotsContainer.innerHTML = '';
            elements.separatorContainer.innerHTML = '';

            // Add 300-year interval separators (Changed from 100 to 300)
            const interval = 300;
            const startSeparatorYear = Math.ceil(minYear / interval) * interval;
            for (let year = startSeparatorYear; year <= maxYear; year += interval) {
                const percentage = ((year - minYear) / totalRange) * 100;

                const separator = document.createElement('div');
                separator.className = 'timeline-separator';
                separator.style.left = `${percentage}%`;
                separator.onclick = () => jumpToYear(year);

                const label = document.createElement('div');
                label.className = 'timeline-separator-label';
                label.textContent = formatYear(year);
                separator.appendChild(label);

                elements.separatorContainer.appendChild(separator);
            }

            // Add individual event dots (for all relevant years)
            allEventYears.forEach(year => {
                if (year >= minYear && year <= maxYear) {
                    const percentage = ((year - minYear) / totalRange) * 100;

                    const dot = document.createElement('div');
                    dot.className = 'timeline-dot';
                    dot.style.left = `${percentage}%`;
                    dot.onclick = () => jumpToYear(year);

                    dot.setAttribute('data-year', year);
                    elements.eventDotsContainer.appendChild(dot);
                }
            });
        }

        function jumpToYear(year) {
            const clampedYear = Math.max(minYear, Math.min(maxYear, year));
            elements.yearSlider.value = clampedYear;
            // Manually trigger the 'input' event to ensure all handlers run
            elements.yearSlider.dispatchEvent(new Event('input', { 'bubbles': true }));
        }

        function initializeSlider() {
            // Set slider min/max values
            elements.yearSlider.min = minYear;
            elements.yearSlider.max = maxYear;

            // Throttle slider updates to animation frames to reduce layout thrash
            let _rafPending = false;
            let _pendingYear = null;
            function scheduleSliderUpdate(el, y) {
                _pendingYear = y;
                if (_rafPending) return;
                _rafPending = true;
                requestAnimationFrame(() => {
                    const progress = ((_pendingYear - minYear) / totalRange) * 100;
                    el.parentElement.style.setProperty('--slider-progress', `${progress}%`);
                    updateDisplay(_pendingYear);
                    _rafPending = false;
                });
            }

            elements.yearSlider.addEventListener('input', function() {
                currentYear = parseInt(this.value);
                scheduleSliderUpdate(this, currentYear);
            });

            // Add 'change' listener to finalize position after drag
            elements.yearSlider.addEventListener('change', function() {
                currentYear = parseInt(this.value);
                scheduleSliderUpdate(this, currentYear);
            });
        }

        function updateDisplay(year) {
            updateYearDisplay(year);
            updateEras(year);
            updateEvents(year);
            updateWars(year); // Update Wars
            updatePersonalities(year);
            updateArrowStates();
        }

        function updateYearDisplay(year) {
            elements.yearDisplay.textContent = formatYear(year);
        }

        // Function to create the dots menu HTML
        function createDotsMenu(itemIndex) {
            return `
                <div class="item-actions">
                    <button class="dots-button" onclick="toggleDropdown(this, event)">⋮</button>
                    <div class="dropdown-menu">
                        <button onclick="editItem(${itemIndex})">Edit</button>
                        <button onclick="deleteItem(${itemIndex})">Delete</button>
                    </div>
                </div>
            `;
        }

        // Global function to toggle dropdown (attached to window for onclick)
        window.toggleDropdown = function(button, event) {
            event.stopPropagation(); // Prevent click from closing immediately
            const dropdown = button.nextElementSibling;
            // Close all other open dropdowns
            document.querySelectorAll('.dropdown-menu.active').forEach(menu => {
                if (menu !== dropdown) {
                    menu.classList.remove('active');
                }
            });
            dropdown.classList.toggle('active');
        };

        // Close dropdowns when clicking anywhere else on the document
        document.addEventListener('click', function(event) {
            document.querySelectorAll('.dropdown-menu.active').forEach(menu => {
                if (!menu.contains(event.target) && !event.target.classList.contains('dots-button')) {
                    menu.classList.remove('active');
                }
            });
        });

        window.editItem = function(index) {
            const item = rawData[index];
            if (!item) return;

            // Set modal title and button text for editing
            elements.addDataModalTitle.textContent = 'Edit Data';
            elements.addDataSubmitButton.textContent = 'Save Changes';
            elements.addDataIndex.value = index; // Store the index of the item being edited

            // Populate form fields
            elements.addDataSection.value = item.type;
            elements.addDataName.value = item.name;
            elements.addDataDescription.value = item.description;

            // Handle startYear and its era
            elements.addDataStart.value = Math.abs(item.startYear);
            elements.addDataStartEra.value = item.startYear < 0 ? 'BCE' : 'CE';

            // Handle endYear and its era
            if (item.type === 'event') { // Events don't have end years
                elements.addDataEnd.value = '';
                elements.addDataEnd.setAttribute('disabled', 'disabled');
                elements.addDataEndEra.setAttribute('disabled', 'disabled');
            } else { // Eras, Personalities, Wars have end years
                elements.addDataEnd.value = item.endYear === 9999 ? '' : Math.abs(item.endYear);
                elements.addDataEndEra.value = item.endYear < 0 ? 'BCE' : 'CE';
                elements.addDataEnd.removeAttribute('disabled');
                elements.addDataEndEra.removeAttribute('disabled');
            }

            // Disable section selection during edit to prevent type changes
            elements.addDataSection.setAttribute('disabled', 'disabled');

            elements.addDataModal.style.display = 'block';
            document.querySelectorAll('.dropdown-menu').forEach(menu => menu.classList.remove('active')); // Close dropdown
        };

        window.deleteItem = function(index) {
            if (confirm('Are you sure you want to delete this item?')) {
                rawData.splice(index, 1); // Remove item from rawData
                initializeData(); // Re-initialize data to regenerate events and update 'data' array
                calculateEventYears(); // Recalculate event years
                createTimelineMarkers(); // Re-render timeline markers
                updateDisplay(currentYear); // Refresh display
                document.querySelectorAll('.dropdown-menu').forEach(menu => menu.classList.remove('active')); // Close dropdown
            }
        };


        function updateEras(year) {
            const activeEras = rawData.map((item, index) => ({ ...item, originalIndex: index })).filter(item =>
                item.type === 'era' &&
                year >= Math.max(item.startYear, minYear) &&
                year <= Math.min(item.endYear ?? maxYear, maxYear)
            );

            elements.erasCount.textContent = `${activeEras.length} active era${activeEras.length !== 1 ? 's' : ''}`;
            elements.erasSubtitle.textContent = `Active in ${formatYear(year)}`;

            if (activeEras.length === 0) {
                elements.erasContent.innerHTML = '<div class="no-data">No active eras for this period</div>';
                return;
            }

            elements.erasContent.innerHTML = activeEras.map(era => `
                <div class="timeline-item era-item ${era.category}">
                    ${createDotsMenu(era.originalIndex)}
                    <div class="item-title">${era.name}</div>
                    <div class="item-subtitle">${formatYearRange(era.startYear, era.endYear)}</div>
                    <div class="item-description">${era.description}</div>
                </div>
            `).join('');
        }

        function updateEvents(year) {
            // Filter rawData for events, excluding generated birth/death events for direct editing/deletion
            const yearEvents = rawData.map((item, index) => ({ ...item, originalIndex: index })).filter(item =>
                item.type === 'event' && item.startYear === year && !item.isGenerated
            );

            elements.eventsCount.textContent = `${yearEvents.length} event${yearEvents.length !== 1 ? 's' : ''}`;
            elements.eventsSubtitle.textContent = `Events in ${formatYear(year)}`;

            if (yearEvents.length === 0) {
                elements.eventsContent.innerHTML = '<div class="no-data">No recorded events for this year</div>';
                return;
            }

            elements.eventsContent.innerHTML = yearEvents.map(event => `
                <div class="timeline-item event-item ${event.category}">
                    ${createDotsMenu(event.originalIndex)}
                    <div class="item-title">${formatYear(event.startYear)}</div>
                    <div class="item-subtitle">${event.name}</div>
                    <div class="item-description">${event.description}</div>
                </div>
            `).join('');
        }

        // NEW: updateWars function
        function updateWars(year) {
            const activeWars = rawData.map((item, index) => ({ ...item, originalIndex: index })).filter(item =>
                item.type === 'war' &&
                year >= Math.max(item.startYear, minYear) &&
                year <= Math.min(item.endYear ?? maxYear, maxYear)
            );

            elements.warsCount.textContent = `${activeWars.length} war${activeWars.length !== 1 ? 's' : ''}`;
            elements.warsSubtitle.textContent = `Active or starting in ${formatYear(year)}`;

            if (activeWars.length === 0) {
                elements.warsContent.innerHTML = '<div class="no-data">No recorded wars for this period</div>';
                return;
            }

            elements.warsContent.innerHTML = activeWars.map(war => `
                <div class="timeline-item war-item">
                    ${createDotsMenu(war.originalIndex)}
                    <div class="item-title">${war.name}</div>
                    <div class="item-subtitle">${formatYearRange(war.startYear, war.endYear)}</div>
                    <div class="item-description">${war.description}</div>
                </div>
            `).join('');
        }


        function updatePersonalities(year) {
            const alivePersonalities = rawData.map((item, index) => ({ ...item, originalIndex: index })).filter(item =>
                item.type === 'personality' &&
                year >= Math.max(item.startYear, minYear) &&
                year <= Math.min(item.endYear ?? maxYear, maxYear)
            );

            elements.personalitiesCount.textContent = `${alivePersonalities.length} individual${alivePersonalities.length !== 1 ? 's' : ''}`;
            elements.personalitiesSubtitle.textContent = `Alive in ${formatYear(year)}`;

            if (alivePersonalities.length === 0) {
                elements.personalitiesContent.innerHTML = '<div class="no-data">No recorded personalities for this year</div>';
                return;
            }

            elements.personalitiesContent.innerHTML = alivePersonalities.map(person => `
                <div class="timeline-item person-item ${person.category}">
                    ${createDotsMenu(person.originalIndex)}
                    <div class="item-title">${person.name}</div>
                    <div class="item-subtitle">${formatYearRange(person.startYear, person.endYear)}</div>
                    <div class="item-description">${person.description}</div>
                </div>
            `).join('');
        }

        // Add Data Modal functionality
        function initializeModal() {
            elements.openAddDataModal.onclick = () => {
                // Reset form for adding new data
                elements.addDataForm.reset();
                elements.addDataModalTitle.textContent = 'Add Data';
                elements.addDataSubmitButton.textContent = 'Add Data';
                elements.addDataIndex.value = ''; // Clear index for new entry
                elements.addDataEnd.removeAttribute('disabled'); // Ensure end date is enabled by default
                elements.addDataEndEra.removeAttribute('disabled'); // Ensure end date era is enabled by default
                elements.addDataSection.removeAttribute('disabled'); // Ensure section is enabled
                elements.addDataStartEra.value = 'CE'; // Default to CE
                elements.addDataEndEra.value = 'CE';   // Default to CE
                elements.addDataModal.style.display = 'block';
            };
            elements.closeAddDataModal.onclick = () => elements.addDataModal.style.display = 'none';

            window.addEventListener('click', (e) => {
                if (e.target === elements.addDataModal) elements.addDataModal.style.display = 'none';
            });

            elements.addDataSection.onchange = () => {
                // If section is 'event', disable end date and its era. Otherwise, enable.
                if (elements.addDataSection.value === 'event') {
                    elements.addDataEnd.value = '';
                    elements.addDataEnd.setAttribute('disabled', 'disabled');
                    elements.addDataEndEra.setAttribute('disabled', 'disabled');
                } else {
                    elements.addDataEnd.removeAttribute('disabled');
                    elements.addDataEndEra.removeAttribute('disabled');
                }
            };

            elements.addDataForm.onsubmit = (e) => {
                e.preventDefault();
                const index = elements.addDataIndex.value; // Get the index if editing
                const section = elements.addDataSection.value;
                const name = elements.addDataName.value.trim();
                let start = Number(elements.addDataStart.value);
                const startEra = elements.addDataStartEra.value;
                let end = elements.addDataEnd.value.trim();
                const endEra = elements.addDataEndEra.value;
                const desc = elements.addDataDescription.value.trim();

                if (!section || !name || !desc || isNaN(start)) {
                    alert('Please fill all required fields.');
                    return;
                }

                // Convert start year to internal representation (negative for BCE)
                if (startEra === 'BCE') {
                    start = -start;
                }

                // Convert end year to internal representation (negative for BCE)
                let endYear;
                if (section === 'event') {
                    endYear = undefined; // Events don't have an end year in this model
                } else {
                    if (end === '') {
                        endYear = 9999; // Use 9999 for 'Present' or if left empty
                    } else {
                        endYear = Number(end);
                        if (endEra === 'BCE') {
                            endYear = -endYear;
                        }
                    }
                }

                let newItem = {
                    type: section,
                    name: name,
                    startYear: start,
                    description: desc
                };

                // Only add endYear if it's not an event
                if (section !== 'event') {
                    newItem.endYear = endYear;
                }

                // Assign a default category if not specified (for custom entries)
                if (section === 'era') {
                    newItem.category = 'custom-era';
                } else if (section === 'personality') {
                    newItem.category = 'custom-personality';
                } else if (section === 'event') {
                    newItem.category = 'custom-event';
                } else if (section === 'war') { // NEW: Default category for wars
                    newItem.category = 'custom-war';
                }


                if (index !== '') {
                    // Editing existing item
                    rawData[index] = newItem;
                } else {
                    // Adding new item
                    rawData.push(newItem);
                }

                initializeData(); // Re-initialize data to regenerate events and update 'data' array
                calculateEventYears(); // Recalculate event years
                createTimelineMarkers(); // Re-render timeline markers
                updateDisplay(currentYear); // Refresh display
                elements.addDataModal.style.display = 'none';
                e.target.reset();
                elements.addDataEnd.removeAttribute('disabled'); // Re-enable for next add
                elements.addDataEndEra.removeAttribute('disabled'); // Re-enable for next add
                elements.addDataSection.removeAttribute('disabled'); // Re-enable for next add
            };
        }

        // Keyword Search functionality
        function initializeSearch() {
            // Go to Year functionality
            elements.goToYearButton.addEventListener('click', () => {
                const yearInput = elements.goToYearInput.value.trim();
                const yearEra = elements.goToYearEra.value;

                if (!yearInput) {
                    alert('Please enter a year to go to.');
                    return;
                }

                let year = parseInt(yearInput, 10);
                if (isNaN(year)) {
                    alert('Please enter a valid number for the year.');
                    return;
                }

                if (yearEra === 'BCE') {
                    year = -year;
                }

                jumpToYear(year);
                elements.goToYearInput.value = ''; // Clear input after jumping
                elements.goToYearInput.blur(); // Remove focus
            });

            elements.goToYearInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    elements.goToYearButton.click(); // Trigger button click on Enter
                }
            });

            // Keyword Search functionality
            const performKeywordSearch = () => {
                const query = elements.yearSearchInput.value.trim();
                if (!query) {
                    elements.searchResultsModal.style.display = 'none'; // Hide if query is empty
                    return;
                }

                displaySearchResults(query);
            };

            elements.yearSearchInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    performKeywordSearch();
                }
            });

            elements.searchButton.addEventListener('click', performKeywordSearch);

            // Close button for the search results modal
            elements.closeSearchResultsModal.onclick = () => {
                elements.searchResultsModal.style.display = 'none';
            };

            // Close modal if clicking outside of it
            window.addEventListener('click', (e) => {
                if (e.target === elements.searchResultsModal) {
                    elements.searchResultsModal.style.display = 'none';
                }
            });
        }

        function displaySearchResults(query) {
            const lowerCaseQuery = query.toLowerCase();
            const results = {
                eras: [],
                events: [],
                wars: [],
                personalities: []
            };

            rawData.forEach(item => {
                // Exclude generated birth/death events from search results
                if (item.isGenerated) return;

                const nameMatch = item.name.toLowerCase().includes(lowerCaseQuery);
                const descMatch = item.description && item.description.toLowerCase().includes(lowerCaseQuery);

                if (nameMatch || descMatch) {
                    if (item.type === 'era') {
                        results.eras.push(item);
                    } else if (item.type === 'event') {
                        results.events.push(item);
                    } else if (item.type === 'war') {
                        results.wars.push(item);
                    } else if (item.type === 'personality') {
                        results.personalities.push(item);
                    }
                }
            });

            let html = '';
            let totalResults = 0;

            // Helper function to render a section of results
            const renderSection = (title, items) => {
                if (items.length > 0) {
                    html += `<div class="search-result-category">${title}</div>`;
                    items.forEach(item => {
                        totalResults++;
                        // Highlight the query in the name and description
                        const highlightedName = highlightMatch(item.name, query);
                        const highlightedDesc = highlightMatch(item.description, query);

                        // Determine the year info to display
                        let yearInfo;
                        if (item.type === 'event') {
                            yearInfo = formatYear(item.startYear);
                        } else { // era, personality, or war
                            yearInfo = formatYearRange(item.startYear, item.endYear);
                        }

                        html += `
                            <div class="search-result-item" data-year="${item.startYear}" data-type="${item.type}">
                                <div class="item-title">${highlightedName}</div>
                                <div class="item-subtitle">${yearInfo}</div>
                                <div class="item-description">${highlightedDesc}</div>
                            </div>
                        `;
                    });
                }
            };

            // Render each category
            renderSection('Eras', results.eras);
            renderSection('Events', results.events);
            renderSection('Wars', results.wars);
            renderSection('Personalities', results.personalities);

            if (totalResults === 0) {
                html = '<div class="no-data">No results found for your search.</div>';
            }

            elements.searchResultsContent.innerHTML = html;
            elements.searchResultsModal.style.display = 'block'; // Show the modal

            // Add click listeners to each search result item
            elements.searchResultsContent.querySelectorAll('.search-result-item').forEach(itemElement => {
                itemElement.addEventListener('click', () => {
                    const yearToJump = parseInt(itemElement.dataset.year, 10);
                    jumpToYear(yearToJump); // Jump to the year of the clicked item
                    elements.searchResultsModal.style.display = 'none'; // Close the modal
                    elements.yearSearchInput.value = ''; // Clear the search input
                });
            });
        }

        function highlightMatch(text, query) {
            if (!text || !query) return text; // Handle empty text or query
            const lowerCaseText = text.toLowerCase();
            const lowerCaseQuery = query.toLowerCase();
            let lastIndex = 0;
            let result = [];

            // Find all occurrences of the query in the text
            while (lastIndex < lowerCaseText.length) {
                const startIndex = lowerCaseText.indexOf(lowerCaseQuery, lastIndex);
                if (startIndex === -1) {
                    // No more matches, add the rest of the text
                    result.push(text.substring(lastIndex));
                    break;
                }
                // Add the text before the match
                result.push(text.substring(lastIndex, startIndex));
                // Add the highlighted match
                result.push(`<span class="highlight">${text.substring(startIndex, startIndex + query.length)}</span>`);
                // Move the lastIndex past the current match
                lastIndex = startIndex + query.length;
            }
            return result.join('');
        }


        // Keyboard shortcuts
        function initializeKeyboardShortcuts() {
            document.addEventListener('keydown', (e) => {
                // Check if the active element is an input or textarea
                const activeElement = document.activeElement;
                const isInputFocused = activeElement.tagName === 'INPUT' || activeElement.tagName === 'TEXTAREA';

                // Also check if any modal is open
                const isModalOpen = elements.addDataModal.style.display === 'block' ||
                                    elements.searchResultsModal.style.display === 'block' ||
                                    elements.fullListModal.style.display === 'block' ||
                                    document.getElementById('chatModal').style.display === 'block';


                if (isInputFocused || isModalOpen) {
                    // If an input is focused or a modal is open, allow default arrow key behavior (cursor movement)
                    // and prevent timeline navigation
                    return;
                }

                switch(e.key) {
                    case 'ArrowLeft':
                        if (e.ctrlKey || e.metaKey) {
                            // Ctrl/Cmd + Left Arrow = Previous event
                            navigateToPreviousEvent();
                        } else {
                            // Regular Left Arrow = 10 years back
                            currentYear = Math.max(minYear, currentYear - 10);
                            jumpToYear(currentYear); // Use jumpToYear to ensure proper update
                        }
                        e.preventDefault(); // Prevent default browser behavior (e.g., back navigation)
                        break;
                    case 'ArrowRight':
                        if (e.ctrlKey || e.metaKey) {
                            // Ctrl/Cmd + Right Arrow = Next event
                            navigateToNextEvent();
                        } else {
                            // Regular Right Arrow = 10 years forward
                            currentYear = Math.min(maxYear, currentYear + 10);
                            jumpToYear(currentYear); // Use jumpToYear to ensure proper update
                        }
                        e.preventDefault(); // Prevent default browser behavior (e.g., forward navigation)
                        break;
                }
            });
        }

        // NEW: Save HTML functionality
        function initializeSaveHtml() {
            elements.saveHtmlButton.addEventListener('click', saveCurrentHtml);
        }

        function saveCurrentHtml() {
            // Get the current HTML content of the document
            let htmlContent = document.documentElement.outerHTML;

            // Find the rawData array in the script tag and update it
            // This is a robust way to ensure the saved file contains the latest data
            const scriptTagRegex = /(let rawData = \[[\s\S]*?\];)/;
            const updatedRawDataString = `let rawData = ${JSON.stringify(rawData, null, 4)};`; // Pretty print JSON

            if (htmlContent.match(scriptTagRegex)) {
                htmlContent = htmlContent.replace(scriptTagRegex, updatedRawDataString);
            } else {
                // Fallback if regex fails, though it should not for this structure
                console.error("Could not find rawData script tag to update.");
                // As a last resort, you might inject it, but replacing is safer.
            }

            // Create a Blob from the HTML content
            const blob = new Blob([htmlContent], { type: 'text/html' });

            // Create a download link
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'Interactive Timeline (Custom).html'; // Suggested filename

            // Append to body, click, and remove
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(a.href); // Clean up the URL object
        }

        // NEW: Full List Modal Functionality
        function initializeFullListModal() {
            elements.erasHeader.addEventListener('click', () => showFullList('era', 'All Eras'));
            elements.eventsHeader.addEventListener('click', () => showFullList('event', 'All Major Events'));
            elements.warsHeader.addEventListener('click', () => showFullList('war', 'All Wars'));
            elements.personalitiesHeader.addEventListener('click', () => showFullList('personality', 'All Personalities'));

            elements.closeFullListModal.onclick = () => elements.fullListModal.style.display = 'none';

            window.addEventListener('click', (e) => {
                if (e.target === elements.fullListModal) elements.fullListModal.style.display = 'none';
            });
        }

        function showFullList(type, title) {
            elements.fullListModalTitle.textContent = title;
            let items = rawData.filter(item => item.type === type && !item.isGenerated); // Exclude generated events

            // Sort chronologically
            items.sort((a, b) => {
                if (a.startYear !== b.startYear) {
                    return a.startYear - b.startYear;
                }
                // For items starting in the same year, sort by endYear (if applicable) or name
                if (a.endYear !== undefined && b.endYear !== undefined) {
                    return a.endYear - b.endYear;
                }
                return a.name.localeCompare(b.name);
            });

            let html = '';
            if (items.length === 0) {
                html = '<div class="no-data">No recorded items for this category.</div>';
            } else {
                html = items.map(item => {
                    let yearInfo;
                    if (item.type === 'event') {
                        yearInfo = formatYear(item.startYear);
                    } else {
                        yearInfo = formatYearRange(item.startYear, item.endYear);
                    }
                    return `
                        <div class="full-list-item">
                            <div class="item-title">${item.name}</div>
                            <div class="item-subtitle">${yearInfo}</div>
                            <div class="item-description">${item.description}</div>
                        </div>
                    `;
                }).join('');
            }

            elements.fullListContent.innerHTML = html;
            elements.fullListModal.style.display = 'block';
        }


        // Initialize everything
        document.addEventListener('DOMContentLoaded', function() {
            cacheElements();
            initializeData();
            calculateEventYears();
            createTimelineMarkers();
            initializeSlider();
            initializeArrowNavigation();
            initializeModal();
            initializeKeyboardShortcuts();
            initializeSearch();
            initializeSaveHtml();
            initializeFullListModal(); // Initialize new full list modal functionality
            // Trigger initial display update
            jumpToYear(currentYear);
        });
    
function convertYearToNumber(year, era) {
    let y = parseInt(year, 10);
    if (isNaN(y)) return null;
    return (era === "BCE") ? -y : y;
}

function isYearInRange(selectedYear, startYear, startEra, endYear, endEra) {
    const start = convertYearToNumber(startYear, startEra);
    const end = (endYear && endYear !== "") ? convertYearToNumber(endYear, endEra) : start;
    if (start === null) return false;
    const minYear = Math.min(start, end);
    const maxYear = Math.max(start, end);
    return selectedYear >= minYear && selectedYear <= maxYear;
}
</script>






<!-- Item Detail Modal -->
<div id="itemDetailModal" class="full-list-modal" style="display: none;">
  <div class="full-list-modal-content">
    <button type="button" class="close-button" onclick="closeItemDetailModal()">×</button>
    <div class="modal-title" id="itemDetailTitle">Ibn Taymiyyah</div>
    <div class="item-subtitle" id="itemDetailSubtitle">1263 CE - 1328 CE</div>
    <div class="item-description" id="itemDetailDescription" style="font-size: 16px; margin-top: 20px;">Influential Islamic theologian who argued that Muslim decline was due to digression from correct Islamic Islamic practice.</div>

    <!-- Dots menu inside modal -->
    <div class="item-actions" style="position: absolute; top: 25px; right: 60px;">
      <button class="dots-button" onclick="toggleDropdown(this, event)">⋮</button>
      <div class="dropdown-menu">
        <button id="modalEditBtn">Edit</button>
        <button id="modalDeleteBtn">Delete</button>
      </div>
    </div>
  </div>
</div>



<script>
function openItemDetailModal(title, subtitle, description, itemId) {
    document.getElementById("itemDetailTitle").textContent = title;
    document.getElementById("itemDetailSubtitle").textContent = subtitle;
    document.getElementById("itemDetailDescription").textContent = description;

    // Update edit/delete handlers
    document.getElementById("modalEditBtn").onclick = () => editItem(itemId);
    document.getElementById("modalDeleteBtn").onclick = () => deleteItem(itemId);

    document.getElementById("itemDetailModal").style.display = "block";
}

function closeItemDetailModal() {
    document.getElementById("itemDetailModal").style.display = "none";
}

// Event Delegation for timeline items
document.querySelector(".content-area").addEventListener("click", function (e) {
    const item = e.target.closest(".timeline-item");
    if (!item || e.target.closest('.dots-button') || e.target.closest('.dropdown-menu')) return;

    const title = item.querySelector(".item-title")?.innerText || "";
    const subtitle = item.querySelector(".item-subtitle")?.innerText || "";
    const description = item.querySelector(".item-description")?.innerText || "";

    // Get item ID from dropdown's onclick handler
    const dropdownBtn = item.querySelector(".dropdown-menu button");
    const onclickAttr = dropdownBtn?.getAttribute("onclick");
    const itemId = onclickAttr ? parseInt(onclickAttr.match(/\d+/)[0]) : null;

    if (itemId !== null) {
        openItemDetailModal(title, subtitle, description, itemId);
    }
});

function convertYearToNumber(year, era) {
    let y = parseInt(year, 10);
    if (isNaN(y)) return null;
    return (era === "BCE") ? -y : y;
}

function isYearInRange(selectedYear, startYear, startEra, endYear, endEra) {
    const start = convertYearToNumber(startYear, startEra);
    const end = (endYear && endYear !== "") ? convertYearToNumber(endYear, endEra) : start;
    if (start === null) return false;
    const minYear = Math.min(start, end);
    const maxYear = Math.max(start, end);
    return selectedYear >= minYear && selectedYear <= maxYear;
}
</script>


<!-- Chat Modal -->
<div id="chatModal" style="display: none;">
    <div class="modal-header">
        <div class="modal-title">Chat With Asad's AI</div>
        <button type="button" id="closeChatModal" class="close-button">×</button>
    </div>
    <div style="display: flex; flex-direction: column; gap: 10px;">
        <textarea id="chatInput" class="form-textarea" placeholder="Ask your question..." style="height: 78px; width: 1517px;"></textarea>
        <button id="sendChatButton" class="submit-button">Send</button>
        <div id="chatResponse" style="color: white; max-height: none; max-width: 1489px; overflow-y: auto; height: 355px; width: 1495px;"></div>
        <div id="chatSources" style="font-size: 12px; color: #ccc;"></div>
    </div>
</div>

<script>
    document.getElementById("openChatButton").onclick = () => {
        document.getElementById("chatModal").style.display = "block";
    };
    document.getElementById("closeChatModal").onclick = () => {
        document.getElementById("chatModal").style.display = "none";
        document.getElementById("chatResponse").innerHTML = '';
        document.getElementById("chatSources").innerHTML = '';
    };
    document.getElementById("sendChatButton").onclick = async () => {
        const input = document.getElementById("chatInput").value.trim();
        if (!input) return;

        const resBox = document.getElementById("chatResponse");
        const sourcesBox = document.getElementById("chatSources");
        resBox.innerHTML = "Thinking...";
        sourcesBox.innerHTML = "";

        try {
            const res = await fetch("http://127.0.0.1:5000/chat", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ message: input })
            });

            const data = await res.json();
            resBox.innerHTML = `<strong>Answer:</strong> ${data.response}`;
            if (data.sources && data.sources.length > 0) {
                sourcesBox.innerHTML = `<strong>Sources:</strong><br>${data.sources.map(s => `• ${s}`).join("<br>")}`;
            }
        } catch (err) {
            resBox.innerHTML = "Error contacting chatbot. Is Flask server running?";
        }
    };

function convertYearToNumber(year, era) {
    let y = parseInt(year, 10);
    if (isNaN(y)) return null;
    return (era === "BCE") ? -y : y;
}

function isYearInRange(selectedYear, startYear, startEra, endYear, endEra) {
    const start = convertYearToNumber(startYear, startEra);
    const end = (endYear && endYear !== "") ? convertYearToNumber(endYear, endEra) : start;
    if (start === null) return false;
    const minYear = Math.min(start, end);
    const maxYear = Math.max(start, end);
    return selectedYear >= minYear && selectedYear <= maxYear;
}
</script>


</body></html>
